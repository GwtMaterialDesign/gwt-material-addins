!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){Array.prototype.reduce||(Array.prototype.reduce=function(e){var t,n=Object(this),i=n.length>>>0,o=0;if(2===arguments.length)t=arguments[1];else{for(;i>o&&!(o in n);)o++;if(o>=i)throw new TypeError("Reduce of empty array with no initial value");t=n[o++]}for(;i>o;o++)o in n&&(t=e(t,n[o],o,n));return t}),"function"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(e){for(var t=Object(this),n=t.length>>>0,i=[],o=arguments.length>=2?arguments[1]:void 0,r=0;n>r;r++)if(r in t){var a=t[r];e.call(o,a,r,t)&&i.push(a)}return i});var t,n="function"==typeof define&&define.amd,i=function(t){if("Roboto"===t)return!0;var n="Comic Sans MS"===t?"Courier New":"Comic Sans MS",i=e("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),o=i.css("fontFamily",n).width(),r=i.css("fontFamily",t+","+n).width();return i.remove(),o!==r},o=navigator.userAgent,r={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:/MSIE|Trident/i.test(o),isFF:/firefox/i.test(o),isWebkit:/webkit/i.test(o),isSafari:/safari/i.test(o),jqueryVersion:parseFloat(e.fn.jquery),isSupportAmd:n,hasCodeMirror:n?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:i,isW3CRangeSupport:!!document.createRange},a=function(){var t=function(e){return function(t){return e===t}},n=function(e,t){return e===t},i=function(e){return function(t,n){return t[e]===n[e]}},o=function(){return!0},r=function(){return!1},a=function(e){return function(){return!e.apply(e,arguments)}},s=function(e,t){return function(n){return e(n)&&t(n)}},l=function(e){return e},d=0,c=function(e){var t=++d+"";return e?e+t:t},u=function(t){var n=e(document);return{top:t.top+n.scrollTop(),left:t.left+n.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}},f=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t},h=function(e,t){return t=t||"",t+e.split(".").map(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}).join("")};return{eq:t,eq2:n,peq2:i,ok:o,fail:r,self:l,not:a,and:s,uniqueId:c,rect2bnd:u,invertObject:f,namespaceToCamel:h}}(),s=function(){var t=function(e){return e[0]},n=function(e){return e[e.length-1]},i=function(e){return e.slice(0,e.length-1)},o=function(e){return e.slice(1)},r=function(e,t){for(var n=0,i=e.length;i>n;n++){var o=e[n];if(t(o))return o}},s=function(e,t){for(var n=0,i=e.length;i>n;n++)if(!t(e[n]))return!1;return!0},l=function(t,n){return-1!==e.inArray(n,t)},d=function(e,t){return t=t||a.self,e.reduce(function(e,n){return e+t(n)},0)},c=function(e){for(var t=[],n=-1,i=e.length;++n<i;)t[n]=e[n];return t},u=function(e,i){if(!e.length)return[];var r=o(e);return r.reduce(function(e,t){var o=n(e);return i(n(o),t)?o[o.length]=t:e[e.length]=[t],e},[[t(e)]])},f=function(e){for(var t=[],n=0,i=e.length;i>n;n++)e[n]&&t.push(e[n]);return t},h=function(e){for(var t=[],n=0,i=e.length;i>n;n++)l(t,e[n])||t.push(e[n]);return t},p=function(e,t){var n=e.indexOf(t);return-1===n?null:e[n+1]},v=function(e,t){var n=e.indexOf(t);return-1===n?null:e[n-1]};return{head:t,last:n,initial:i,tail:o,prev:v,next:p,find:r,contains:l,all:s,sum:d,from:c,clusterBy:u,compact:f,unique:h}}(),l=String.fromCharCode(160),d="\ufeff",c=function(){var t=function(t){return t&&e(t).hasClass("note-editable")},n=function(t){return t&&e(t).hasClass("note-control-sizing")},i=function(t){var n;if(t.hasClass("note-air-editor")){var i=s.last(t.attr("id").split("-"));return n=function(t){return function(){return e(t+i)}},{editor:function(){return t},holder:function(){return t.data("holder")},editable:function(){return t},popover:n("#note-popover-"),handle:n("#note-handle-"),dialog:n("#note-dialog-")}}return n=function(e){return function(){return t.find(e)}},{editor:function(){return t},holder:function(){return t.data("holder")},dropzone:n(".note-dropzone"),toolbar:n(".note-toolbar"),editable:n(".note-editable"),codable:n(".note-codable"),statusbar:n(".note-statusbar"),popover:n(".note-popover"),handle:n(".note-handle"),dialog:n(".note-dialog")}},o=function(t){var n=e(t).closest(".note-editor, .note-air-editor, .note-air-layout");if(!n.length)return null;var o;return o=n.is(".note-editor, .note-air-editor")?n:e("#note-editor-"+s.last(n.attr("id").split("-"))),i(o)},u=function(e){return e=e.toUpperCase(),function(t){return t&&t.nodeName.toUpperCase()===e}},f=function(e){return e&&3===e.nodeType},h=function(e){return e&&/^BR|^IMG|^HR/.test(e.nodeName.toUpperCase())},p=function(e){return t(e)?!1:e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase())},v=u("LI"),g=function(e){return p(e)&&!v(e)},m=u("TABLE"),b=function(e){return!(x(e)||k(e)||p(e)||m(e)||C(e))},k=function(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())},y=function(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())},C=u("BLOCKQUOTE"),x=function(e){return y(e)||C(e)||t(e)},w=u("A"),T=function(e){return b(e)&&!!H(e,p)},N=function(e){return b(e)&&!H(e,p)},P=u("BODY"),L=function(e,t){return e.nextSibling===t||e.previousSibling===t},S=function(e,t){t=t||a.ok;var n=[];return e.previousSibling&&t(e.previousSibling)&&n.push(e.previousSibling),n.push(e),e.nextSibling&&t(e.nextSibling)&&n.push(e.nextSibling),n},I=r.isMSIE?"&nbsp;":"<br>",M=function(e){return f(e)?e.nodeValue.length:e.childNodes.length},R=function(e){var t=M(e);return 0===t?!0:f(e)||1!==t||e.innerHTML!==I?s.all(e.childNodes,f)&&""===e.innerHTML?!0:!1:!0},E=function(e){h(e)||M(e)||(e.innerHTML=I)},H=function(e,n){for(;e;){if(n(e))return e;if(t(e))break;e=e.parentNode}return null},A=function(e,n){for(e=e.parentNode;e&&1===M(e);){if(n(e))return e;if(t(e))break;e=e.parentNode}return null},D=function(e,n){n=n||a.fail;var i=[];return H(e,function(e){return t(e)||i.push(e),n(e)}),i},F=function(e,t){var n=D(e);return s.last(n.filter(t))},B=function(t,n){for(var i=D(t),o=n;o;o=o.parentNode)if(e.inArray(o,i)>-1)return o;return null},U=function(e,t){t=t||a.fail;for(var n=[];e&&!t(e);)n.push(e),e=e.previousSibling;return n},z=function(e,t){t=t||a.fail;for(var n=[];e&&!t(e);)n.push(e),e=e.nextSibling;return n},O=function(e,t){var n=[];return t=t||a.ok,function i(o){e!==o&&t(o)&&n.push(o);for(var r=0,a=o.childNodes.length;a>r;r++)i(o.childNodes[r])}(e),n},j=function(t,n){var i=t.parentNode,o=e("<"+n+">")[0];return i.insertBefore(o,t),o.appendChild(t),o},_=function(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e},q=function(t,n){return e.each(n,function(e,n){t.appendChild(n)}),t},W=function(e){return 0===e.offset},K=function(e){return e.offset===M(e.node)},V=function(e){return W(e)||K(e)},Q=function(e,t){for(;e&&e!==t;){if(0!==J(e))return!1;e=e.parentNode}return!0},Z=function(e,t){for(;e&&e!==t;){if(J(e)!==M(e.parentNode)-1)return!1;e=e.parentNode}return!0},J=function(e){for(var t=0;e=e.previousSibling;)t+=1;return t},Y=function(e){return!!(e&&e.childNodes&&e.childNodes.length)},G=function(e,n){var i,o;if(0===e.offset){if(t(e.node))return null;i=e.node.parentNode,o=J(e.node)}else Y(e.node)?(i=e.node.childNodes[e.offset-1],o=M(i)):(i=e.node,o=n?0:e.offset-1);return{node:i,offset:o}},X=function(e,n){var i,o;if(M(e.node)===e.offset){if(t(e.node))return null;i=e.node.parentNode,o=J(e.node)+1}else Y(e.node)?(i=e.node.childNodes[e.offset],o=0):(i=e.node,o=n?M(e.node):e.offset+1);return{node:i,offset:o}},$=function(e,t){return e.node===t.node&&e.offset===t.offset},ee=function(e){if(f(e.node)||!Y(e.node)||R(e.node))return!0;var t=e.node.childNodes[e.offset-1],n=e.node.childNodes[e.offset];return t&&!h(t)||n&&!h(n)?!1:!0},te=function(e,t){for(;e;){if(t(e))return e;e=G(e)}return null},ne=function(e,t){for(;e;){if(t(e))return e;e=X(e)}return null},ie=function(e){if(!f(e.node))return!1;var t=e.node.nodeValue.charAt(e.offset-1);return t&&" "!==t&&t!==l},oe=function(e,t,n,i){for(var o=e;o&&(n(o),!$(o,t));){var r=i&&e.node!==o.node&&t.node!==o.node;o=X(o,r)}},re=function(t,n){var i=D(n,a.eq(t));return e.map(i,J).reverse()},ae=function(e,t){for(var n=e,i=0,o=t.length;o>i;i++)n=n.childNodes.length<=t[i]?n.childNodes[n.childNodes.length-1]:n.childNodes[t[i]];return n},se=function(e,t){var n=t&&t.isSkipPaddingBlankHTML,i=t&&t.isNotSplitEdgePoint;if(V(e)&&(f(e.node)||i)){if(W(e))return e.node;if(K(e))return e.node.nextSibling}if(f(e.node))return e.node.splitText(e.offset);var o=e.node.childNodes[e.offset],r=_(e.node.cloneNode(!1),e.node);return q(r,z(o)),n||(E(e.node),E(r)),r},le=function(e,t,n){var i=D(t.node,a.eq(e));return i.length?1===i.length?se(t,n):i.reduce(function(e,i){return e===t.node&&(e=se(t,n)),se({node:i,offset:e?c.position(e):M(i)},n)}):null},de=function(e,t){var n,i,o=t?p:x,r=D(e.node,o),a=s.last(r)||e.node;o(a)?(n=r[r.length-2],i=a):(n=a,i=n.parentNode);var l=n&&le(n,e,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t});return l||i!==e.node||(l=e.node.childNodes[e.offset]),{rightNode:l,container:i}},ce=function(e){return document.createElement(e)},ue=function(e){return document.createTextNode(e)},fe=function(e,t){if(e&&e.parentNode){if(e.removeNode)return e.removeNode(t);var n=e.parentNode;if(!t){var i,o,r=[];for(i=0,o=e.childNodes.length;o>i;i++)r.push(e.childNodes[i]);for(i=0,o=r.length;o>i;i++)n.insertBefore(r[i],e)}n.removeChild(e)}},he=function(e,n){for(;e&&!t(e)&&n(e);){var i=e.parentNode;fe(e),e=i}},pe=function(e,t){if(e.nodeName.toUpperCase()===t.toUpperCase())return e;var n=ce(t);return e.style.cssText&&(n.style.cssText=e.style.cssText),q(n,s.from(e.childNodes)),_(n,e),fe(e),n},ve=u("TEXTAREA"),ge=function(e,t){var n=ve(e[0])?e.val():e.html();return t?n.replace(/[\n\r]/g,""):n},me=function(t,n){var i=ge(t);if(n){var o=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;i=i.replace(o,function(e,t,n){n=n.toUpperCase();var i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!t,o=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return e+(i||o?"\n":"")}),i=e.trim(i)}return i};return{NBSP_CHAR:l,ZERO_WIDTH_NBSP_CHAR:d,blank:I,emptyPara:"<p>"+I+"</p>",makePredByNodeName:u,isEditable:t,isControlSizing:n,buildLayoutInfo:i,makeLayoutInfo:o,isText:f,isVoid:h,isPara:p,isPurePara:g,isInline:b,isBlock:a.not(b),isBodyInline:N,isBody:P,isParaInline:T,isList:k,isTable:m,isCell:y,isBlockquote:C,isBodyContainer:x,isAnchor:w,isDiv:u("DIV"),isLi:v,isBR:u("BR"),isSpan:u("SPAN"),isB:u("B"),isU:u("U"),isS:u("S"),isI:u("I"),isImg:u("IMG"),isTextarea:ve,isEmpty:R,isEmptyAnchor:a.and(w,R),isClosestSibling:L,withClosestSiblings:S,nodeLength:M,isLeftEdgePoint:W,isRightEdgePoint:K,isEdgePoint:V,isLeftEdgeOf:Q,isRightEdgeOf:Z,prevPoint:G,nextPoint:X,isSamePoint:$,isVisiblePoint:ee,prevPointUntil:te,nextPointUntil:ne,isCharPoint:ie,walkPoint:oe,ancestor:H,singleChildAncestor:A,listAncestor:D,lastAncestor:F,listNext:z,listPrev:U,listDescendant:O,commonAncestor:B,wrap:j,insertAfter:_,appendChildNodes:q,position:J,hasChildren:Y,makeOffsetPath:re,fromOffsetPath:ae,splitTree:le,splitPoint:de,create:ce,createText:ue,remove:fe,removeWhile:he,replace:pe,html:me,value:ge}}(),u=function(){var t=function(e,t){var n,i,o=e.parentElement(),r=document.body.createTextRange(),a=s.from(o.childNodes);for(n=0;n<a.length;n++)if(!c.isText(a[n])){if(r.moveToElementText(a[n]),r.compareEndPoints("StartToStart",e)>=0)break;i=a[n]}if(0!==n&&c.isText(a[n-1])){var l=document.body.createTextRange(),d=null;l.moveToElementText(i||o),l.collapse(!i),d=i?i.nextSibling:o.firstChild;var u=e.duplicate();u.setEndPoint("StartToStart",l);for(var f=u.text.replace(/[\r\n]/g,"").length;f>d.nodeValue.length&&d.nextSibling;)f-=d.nodeValue.length,d=d.nextSibling;d.nodeValue;t&&d.nextSibling&&c.isText(d.nextSibling)&&f===d.nodeValue.length&&(f-=d.nodeValue.length,d=d.nextSibling),o=d,n=f}return{cont:o,offset:n}},n=function(e){var t=function(e,n){var i,o;if(c.isText(e)){var r=c.listPrev(e,a.not(c.isText)),l=s.last(r).previousSibling;i=l||e.parentNode,n+=s.sum(s.tail(r),c.nodeLength),o=!l}else{if(i=e.childNodes[n]||e,c.isText(i))return t(i,0);n=0,o=!1}return{node:i,collapseToStart:o,offset:n}},n=document.body.createTextRange(),i=t(e.node,e.offset);return n.moveToElementText(i.node),n.collapse(i.collapseToStart),n.moveStart("character",i.offset),n},i=function(t,o,l,d){this.sc=t,this.so=o,this.ec=l,this.eo=d;var u=function(){if(r.isW3CRangeSupport){var e=document.createRange();return e.setStart(t,o),e.setEnd(l,d),e}var i=n({node:t,offset:o});return i.setEndPoint("EndToEnd",n({node:l,offset:d})),i};this.getPoints=function(){return{sc:t,so:o,ec:l,eo:d}},this.getStartPoint=function(){return{node:t,offset:o}},this.getEndPoint=function(){return{node:l,offset:d}},this.select=function(){var e=u();if(r.isW3CRangeSupport){var t=document.getSelection();t.rangeCount>0&&t.removeAllRanges(),t.addRange(e)}else e.select();return this},this.normalize=function(){var e=function(e){return c.isVisiblePoint(e)||(e=c.isLeftEdgePoint(e)?c.nextPointUntil(e,c.isVisiblePoint):c.prevPointUntil(e,c.isVisiblePoint)),e},t=e(this.getStartPoint()),n=e(this.getEndPoint());return new i(t.node,t.offset,n.node,n.offset)},this.nodes=function(e,t){e=e||a.ok;var n=t&&t.includeAncestor,i=t&&t.fullyContains,o=this.getStartPoint(),r=this.getEndPoint(),l=[],d=[];return c.walkPoint(o,r,function(t){if(!c.isEditable(t.node)){var o;i?(c.isLeftEdgePoint(t)&&d.push(t.node),c.isRightEdgePoint(t)&&s.contains(d,t.node)&&(o=t.node)):o=n?c.ancestor(t.node,e):t.node,o&&e(o)&&l.push(o)}},!0),s.unique(l)},this.commonAncestor=function(){return c.commonAncestor(t,l)},this.expand=function(e){var n=c.ancestor(t,e),r=c.ancestor(l,e);if(!n&&!r)return new i(t,o,l,d);var a=this.getPoints();return n&&(a.sc=n,a.so=0),r&&(a.ec=r,a.eo=c.nodeLength(r)),new i(a.sc,a.so,a.ec,a.eo)},this.collapse=function(e){return e?new i(t,o,t,o):new i(l,d,l,d)},this.splitText=function(){var e=t===l,n=this.getPoints();return c.isText(l)&&!c.isEdgePoint(this.getEndPoint())&&l.splitText(d),c.isText(t)&&!c.isEdgePoint(this.getStartPoint())&&(n.sc=t.splitText(o),n.so=0,e&&(n.ec=n.sc,n.eo=d-o)),new i(n.sc,n.so,n.ec,n.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var t=this.splitText(),n=t.nodes(null,{fullyContains:!0}),o=c.prevPointUntil(t.getStartPoint(),function(e){return!s.contains(n,e.node)}),r=[];return e.each(n,function(e,t){var n=t.parentNode;o.node!==n&&1===c.nodeLength(n)&&r.push(n),c.remove(t,!1)}),e.each(r,function(e,t){c.remove(t,!1)}),new i(o.node,o.offset,o.node,o.offset).normalize()};var f=function(e){return function(){var n=c.ancestor(t,e);return!!n&&n===c.ancestor(l,e)}};this.isOnEditable=f(c.isEditable),this.isOnList=f(c.isList),this.isOnAnchor=f(c.isAnchor),this.isOnCell=f(c.isCell),this.isLeftEdgeOf=function(e){if(!c.isLeftEdgePoint(this.getStartPoint()))return!1;var t=c.ancestor(this.sc,e);return t&&c.isLeftEdgeOf(this.sc,t)},this.isCollapsed=function(){return t===l&&o===d},this.wrapBodyInlineWithPara=function(){if(c.isBodyContainer(t)&&c.isEmpty(t))return t.innerHTML=c.emptyPara,new i(t.firstChild,0,t.firstChild,0);if(c.isParaInline(t)||c.isPara(t))return this.normalize();var e;if(c.isInline(t)){var n=c.listAncestor(t,a.not(c.isInline));e=s.last(n),c.isInline(e)||(e=n[n.length-2]||t.childNodes[o])}else e=t.childNodes[o>0?o-1:0];var r=c.listPrev(e,c.isParaInline).reverse();if(r=r.concat(c.listNext(e.nextSibling,c.isParaInline)),r.length){var l=c.wrap(s.head(r),"p");c.appendChildNodes(l,s.tail(r))}return this.normalize()},this.insertNode=function(e){var t=this.wrapBodyInlineWithPara().deleteContents(),n=c.splitPoint(t.getStartPoint(),c.isInline(e));return n.rightNode?n.rightNode.parentNode.insertBefore(e,n.rightNode):n.container.appendChild(e),e},this.pasteHTML=function(t){var n=this,i=e("<div></div>").html(t)[0],o=s.from(i.childNodes);return this.wrapBodyInlineWithPara().deleteContents(),e.map(o.reverse(),function(e){return n.insertNode(e)}).reverse()},this.toString=function(){var e=u();return r.isW3CRangeSupport?e.toString():e.text},this.getWordRange=function(e){var t=this.getEndPoint();if(!c.isCharPoint(t))return this;var n=c.prevPointUntil(t,function(e){return!c.isCharPoint(e)});return e&&(t=c.nextPointUntil(t,function(e){return!c.isCharPoint(e)})),new i(n.node,n.offset,t.node,t.offset)},this.bookmark=function(e){return{s:{path:c.makeOffsetPath(e,t),offset:o},e:{path:c.makeOffsetPath(e,l),offset:d}}},this.paraBookmark=function(e){return{s:{path:s.tail(c.makeOffsetPath(s.head(e),t)),offset:o},e:{path:s.tail(c.makeOffsetPath(s.last(e),l)),offset:d}}},this.getClientRects=function(){var e=u();return e.getClientRects()}};return{create:function(e,n,o,a){if(arguments.length)2===arguments.length&&(o=e,a=n);else if(r.isW3CRangeSupport){var s=document.getSelection();if(!s||0===s.rangeCount)return null;if(c.isBody(s.anchorNode))return null;var l=s.getRangeAt(0);e=l.startContainer,n=l.startOffset,o=l.endContainer,a=l.endOffset}else{var d=document.selection.createRange(),u=d.duplicate();u.collapse(!1);var f=d;f.collapse(!0);var h=t(f,!0),p=t(u,!1);c.isText(h.node)&&c.isLeftEdgePoint(h)&&c.isTextNode(p.node)&&c.isRightEdgePoint(p)&&p.node.nextSibling===h.node&&(h=p),e=h.cont,n=h.offset,o=p.cont,a=p.offset}return new i(e,n,o,a)},createFromNode:function(e){var t=e,n=0,i=e,o=c.nodeLength(i);return c.isVoid(t)&&(n=c.listPrev(t).length-1,t=t.parentNode),c.isBR(i)?(o=c.listPrev(i).length-1,i=i.parentNode):c.isVoid(i)&&(o=c.listPrev(i).length,i=i.parentNode),this.create(t,n,i,o)},createFromNodeBefore:function(e){return this.createFromNode(e).collapse(!0)},createFromNodeAfter:function(e){return this.createFromNode(e).collapse()},createFromBookmark:function(e,t){var n=c.fromOffsetPath(e,t.s.path),o=t.s.offset,r=c.fromOffsetPath(e,t.e.path),a=t.e.offset;return new i(n,o,r,a)},createFromParaBookmark:function(e,t){var n=e.s.offset,o=e.e.offset,r=c.fromOffsetPath(s.head(t),e.s.path),a=c.fromOffsetPath(s.last(t),e.e.path);return new i(r,n,a,o)}}}(),f={version:"0.6.9",options:{defaultTextColor:"#212121",defaultBackColor:"#ddd",followingToolbar:!0,otherStaticBarClass:"staticTop",width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,shortcuts:!0,placeholder:!1,prettifyHtml:!0,iconPrefix:"",icons:{font:{bold:"format_bold",italic:"format_italic",underline:"format_underlined",clear:"clear",height:"format_size",strikethrough:"strikethrough_s",superscript:"vertical_align_top",subscript:"vertical_align_bottom"},image:{image:"image",floatLeft:"format_align_left",floatRight:"format_align_right",floatNone:"format_align_justify",shapeRounded:"crop_3_2",shapeCircle:"panorama_fish_eye",shapeThumbnail:"collections",bordered:"border_outer",shapeNone:"image",remove:"delete"},link:{link:"insert_link",unlink:"clear",edit:"create"},table:{table:"border_all"},hr:{insert:"add"},style:{style:"border_color"},lists:{unordered:"format_list_bulleted",ordered:"format_list_numbered"},options:{help:"help",fullscreen:"settings_overscan",codeview:"code"},paragraph:{paragraph:"format_textdirection_l_to_r",outdent:"format_indent_decrease",indent:"format_indent_increase",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify"},color:{recent:"format_color_text"},history:{undo:"undo",redo:"redo"},misc:{check:"check"}},codemirror:{mode:"text/html",htmlMode:!0,indentWithTabs:!0,tabSize:4,lineNumbers:!0,theme:"monokai",maxHighlightLength:"Infinity"},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],plugin:{},airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Roboto",fontNames:["Roboto","Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],fontSizes:["12","13","14","15","16","17","18","25","37"],colors:[["#fafafa","#efebe9","#7e57c2","#ab47bc","#5c6bc0","#42a5f5","#26c6da","#66bb6a","#9ccc65","#ffee58","#ffca28","#ffa726","#ff7043","#ef5350","#ec407a"],["#f5f5f5","#d7ccc8","#673ab7","#9c27b0","#3f51b5","#2196f3","#00bcd4","#4caf50","#8bc34a","#ffeb3b","#ffc107","#ff9800","#ff5722","#f44336","#e91e63"],["#eeeeee","#bcaaa4","#5e35b1","#8e24aa","#3949ab","#1e88e5","#00acc1","#43a047","#7cb342","#fdd835","#ffb300","#fb8c00","#f4511e","#e53935","#d81b60"],["#e0e0e0","#a1887f","#512da8","#7b1fa2","#303f9f","#1976d2","#0097a7","#388e3c","#689f38","#fbc02d","#ffa000","#f57c00","#e64a19","#d32f2f","#c2185b"],["#bdbdbd","#8d6e63","#4527a0","#6a1b9a","#283593","#1565c0","#00838f","#2e7d32","#558b2f","#f9a825","#ff8f00","#ef6c00","#d84315","#c62828","#ad1457"],["#9e9e9e","#795548","#311b92","#4a148c","#1a237e","#0d47a1","#006064","#1b5e20","#33691e","#f57f17","#ff6f00","#e65100","#bf360c","#b71c1c","#880e4f"],["#757575","#6d4c41","#b388ff","#ea80fc","#8c9eff","#82b1ff","#84ffff","#b9f6ca","#ccff90","#ffff8d","#ffe57f","#ffd180","#ff9e80","#ff8a80","#ff80ab"],["#616161","#5d4037","#7c4dff","#e040fb","#536dfe","#448aff","#18ffff","#69f0ae","#b2ff59","#ffff00","#ffd740","#ffab40","#ff6e40","#ff5252","#ff4081"],["#424242","#4e342e","#651fff","#d500f9","#3d5afe","#2979ff","#00e5ff","#00e676","#76ff03","#ffea00","#ffc400","#ff9100","#ff3d00","#ff1744","#f50057"],["#212121","#3e2723","#6200ea","#aa00ff","#304ffe","#2962ff","#00b8d4","#00c853","#64dd17","#ffd600","#ffab00","#ff6d00","#dd2c00","#d50000","#c51162"]],colorTitles:[["grey lighten5","brown lighten5","deep-purple lighten1","purple lighten1","indigo lighten1","blue lighten1","cyan lighten1","green lighten1","light-green lighten1","yellow lighten1","amber lighten1","orange lighten1","deep-orange lighten1","red lighten1","pink lighten1"],["grey lighten4","brown lighten4","deep-purple","purple","indigo","blue","cyan","green","light-green","yellow","amber","orange","deep-orange","red","pink"],["grey lighten3","brown lighten3","deep-purple darken1","purple darken1","indigo darken1","blue darken1","cyan darken1","green darken1","light-green darken1","yellow darken1","amber darken1","orange darken1","deep-orange darken1","red darken1","pink darken1"],["grey lighten2","brown lighten2","deep-purple darken2","purple darken2","indigo darken2","blue darken2","cyan darken2","green darken2","light-green darken2","yellow darken2","amber darken2","orange darken2","deep-orange darken2","red darken2","pink darken2"],["grey lighten1","brown lighten1","deep-purple darken3","purple darken3","indigo darken3","blue darken3","cyan darken3","green darken3","light-green darken3","yellow darken3","amber darken3","orange darken3","deep-orange darken3","red darken3","pink darken3"],["grey","brown","deep-purple darken4","purple darken4","indigo darken4","blue darken4","cyan darken4","green darken4","light-green darken4","yellow darken4","amber darken4","orange darken4","deep-orange darken4","red darken4","pink darken4"],["grey darken1","brown darken1","deep-purple accent1","purple accent1","indigo accent1","blue accent1","cyan accent1","green accent1","light-green accent1","yellow accent1","amber accent1","orange accent1","deep-orange accent1","red accent1","pink accent1"],["grey darken2","brown darken2","deep-purple accent2","purple accent2","indigo accent2","blue accent2","cyan accent2","green accent2","light-green accent2","yellow accent2","amber accent2","orange accent2","deep-orange accent2","red accent2","pink accent2"],["grey darken3","brown darken3","deep-purple accent3","purple accent3","indigo accent3","blue accent3","cyan accent3","green accent3","light-green accent3","yellow accent3","amber accent3","orange accent3","deep-orange accent3","red accent3","pink accent3"],["grey darken4","brown darken4","deep-purple accent4","purple accent4","indigo accent4","blue accent4","cyan accent4","green accent4","light-green accent4","yellow accent4","amber accent4","orange accent4","deep-orange accent4","red accent4","pink accent4"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:12,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(e){return-1!==e.indexOf("@")&&-1===e.indexOf(":")&&(e="mailto:"+e),e},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",bordered:"Bordered",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",striped:"Striped",hoverable:"Hoverable",responsive:"Responsive",bordered:"Bordered"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Back",foreground:"Text",transparent:"Transparent",setTransparent:"Transparent",reset:"Reset",resetToDefault:"Default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}},h=function(){var t=function(t){return e.Deferred(function(n){e.extend(new FileReader,{onload:function(e){var t=e.target.result;n.resolve(t)},onerror:function(){n.reject(this)}}).readAsDataURL(t)}).promise()},n=function(t,n){return e.Deferred(function(i){var o=e("<img>");o.one("load",function(){o.off("error abort"),i.resolve(o)}).one("error abort",function(){o.off("load").detach(),i.reject(o)}).css({display:"none"}).appendTo(document.body).attr({src:t,"data-filename":n})}).promise()};return{readFileAsDataURL:t,createImage:n}}(),p=function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(e){return s.contains([8,9,13,32],e)},isMove:function(e){return s.contains([37,38,39,40],e)},nameFromCode:a.invertObject(e),code:e}}(),v=function(e){var t=[],n=-1,i=e[0],o=function(){var t=u.create(),n={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:e.html(),bookmark:t?t.bookmark(i):n}},r=function(t){null!==t.contents&&e.html(t.contents),null!==t.bookmark&&u.createFromBookmark(i,t.bookmark).select()};this.undo=function(){n>0&&(n--,r(t[n]))},this.redo=function(){t.length-1>n&&(n++,r(t[n]))},this.recordUndo=function(){n++,t.length>n&&(t=t.slice(0,n)),t.push(o())},this.recordUndo()},g=function(){var t=function(t,n){if(r.jqueryVersion<1.9){var i={};return e.each(n,function(e,n){i[n]=t.css(n)}),i}return t.css.call(t,n)};this.stylePara=function(t,n){e.each(t.nodes(c.isPara,{includeAncestor:!0}),function(t,i){e(i).css(n)})},this.styleNodes=function(t,n){t=t.splitText();var i=n&&n.nodeName||"SPAN",o=!(!n||!n.expandClosestSibling),r=!(!n||!n.onlyPartialContains);if(t.isCollapsed())return[t.insertNode(c.create(i))];var l=c.makePredByNodeName(i),d=e.map(t.nodes(c.isText,{fullyContains:!0}),function(e){return c.singleChildAncestor(e,l)||c.wrap(e,i)});if(o){if(r){var u=t.nodes();l=a.and(l,function(e){return s.contains(u,e)})}return e.map(d,function(t){var n=c.withClosestSiblings(t,l),i=s.head(n),o=s.tail(n);return e.each(o,function(e,t){c.appendChildNodes(i,t.childNodes),c.remove(t)}),s.head(n)})}return d},this.current=function(n,i){var o=e(c.isText(n.sc)?n.sc.parentNode:n.sc),r=["font-family","font-size","text-align","list-style-type","line-height"],a=t(o,r)||{};if(a["font-size"]=parseInt(a["font-size"],10),a["font-bold"]=document.queryCommandState("bold")?"bold":"normal",a["font-italic"]=document.queryCommandState("italic")?"italic":"normal",a["font-underline"]=document.queryCommandState("underline")?"underline":"normal",a["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",a["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",a["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",n.isOnList()){var s=["circle","disc","disc-leading-zero","square"],l=e.inArray(a["list-style-type"],s)>-1;a["list-style"]=l?"unordered":"ordered"}else a["list-style"]="none";var d=c.ancestor(n.sc,c.isPara);if(d&&d.style["line-height"])a["line-height"]=d.style.lineHeight;else{var u=parseInt(a["line-height"],10)/parseInt(a["font-size"],10);a["line-height"]=u.toFixed(1)}return a.image=c.isImg(i)&&i,a.anchor=n.isOnAnchor()&&c.ancestor(n.sc,c.isAnchor),a.ancestors=c.listAncestor(n.sc,c.isEditable),a.range=n,a}},m=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var t=this,n=u.create().wrapBodyInlineWithPara(),i=n.nodes(c.isPara,{includeAncestor:!0}),o=s.clusterBy(i,a.peq2("parentNode"));e.each(o,function(n,i){var o=s.head(i);c.isLi(o)?t.wrapList(i,o.parentNode.nodeName):e.each(i,function(t,n){e(n).css("marginLeft",function(e,t){return(parseInt(t,10)||0)+25})})}),n.select()},this.outdent=function(){var t=this,n=u.create().wrapBodyInlineWithPara(),i=n.nodes(c.isPara,{includeAncestor:!0}),o=s.clusterBy(i,a.peq2("parentNode"));e.each(o,function(n,i){var o=s.head(i);c.isLi(o)?t.releaseList([i]):e.each(i,function(t,n){
    e(n).css("marginLeft",function(e,t){return t=parseInt(t,10)||0,t>25?t-25:""})})}),n.select()},this.toggleList=function(t){var n=this,i=u.create().wrapBodyInlineWithPara(),o=i.nodes(c.isPara,{includeAncestor:!0}),r=i.paraBookmark(o),l=s.clusterBy(o,a.peq2("parentNode"));if(s.find(o,c.isPurePara)){var d=[];e.each(l,function(e,i){d=d.concat(n.wrapList(i,t))}),o=d}else{var f=i.nodes(c.isList,{includeAncestor:!0}).filter(function(n){return!e.nodeName(n,t)});f.length?e.each(f,function(e,n){c.replace(n,t)}):o=this.releaseList(l,!0)}u.createFromParaBookmark(r,o).select()},this.wrapList=function(t,n){var i=s.head(t),o=s.last(t),r=c.isList(i.previousSibling)&&i.previousSibling,a=c.isList(o.nextSibling)&&o.nextSibling,l=r||c.insertAfter(c.create(n||"UL"),o);return t=e.map(t,function(e){return c.isPurePara(e)?c.replace(e,"LI"):e}),c.appendChildNodes(l,t),a&&(c.appendChildNodes(l,s.from(a.childNodes)),c.remove(a)),t},this.releaseList=function(t,n){var i=[];return e.each(t,function(t,o){var r=s.head(o),a=s.last(o),l=n?c.lastAncestor(r,c.isList):r.parentNode,d=l.childNodes.length>1?c.splitTree(l,{node:a.parentNode,offset:c.position(a)+1},{isSkipPaddingBlankHTML:!0}):null,u=c.splitTree(l,{node:r.parentNode,offset:c.position(r)},{isSkipPaddingBlankHTML:!0});o=n?c.listDescendant(u,c.isLi):s.from(u.childNodes).filter(c.isLi),(n||!c.isList(l.parentNode))&&(o=e.map(o,function(e){return c.replace(e,"P")})),e.each(s.from(o).reverse(),function(e,t){c.insertAfter(t,l)});var f=s.compact([l,u,d]);e.each(f,function(t,n){var i=[n].concat(c.listDescendant(n,c.isList));e.each(i.reverse(),function(e,t){c.nodeLength(t)||c.remove(t,!0)})}),i=i.concat(o)}),i}},b=function(){var t=new m;this.insertTab=function(e,t,n){var i=c.createText(new Array(n+1).join(c.NBSP_CHAR));t=t.deleteContents(),t.insertNode(i,!0),t=u.create(i,n),t.select()},this.insertParagraph=function(){var n=u.create();n=n.deleteContents(),n=n.wrapBodyInlineWithPara();var i,o=c.ancestor(n.sc,c.isPara);if(o){if(c.isEmpty(o)&&c.isLi(o))return void t.toggleList(o.parentNode.nodeName);i=c.splitTree(o,n.getStartPoint());var r=c.listDescendant(o,c.isEmptyAnchor);r=r.concat(c.listDescendant(i,c.isEmptyAnchor)),e.each(r,function(e,t){c.remove(t)})}else{var a=n.sc.childNodes[n.so];i=e(c.emptyPara)[0],a?n.sc.insertBefore(i,a):n.sc.appendChild(i)}u.create(i,0).normalize().select()}},k=function(){this.tab=function(e,t){var n=c.ancestor(e.commonAncestor(),c.isCell),i=c.ancestor(n,c.isTable),o=c.listDescendant(i,c.isCell),r=s[t?"prev":"next"](o,n);r&&u.create(r,0).select()},this.createTable=function(t){for(var n,i=[],o=[],r=t[0],a=t[1],s=t.slice(2,t.length),l=0;r>l;l++)i.push("<td>(item)</td>"),o.push("<th>header</th>");n=i.join(""),o=o.join("");for(var d,c=[],u=0;a>u;u++)c.push("<tr>"+n+"</tr>");return d=c.join(""),e('<table class="'+s.join(" ")+'"><thead><tr>'+o+"</tr></thead><tbody>"+d+"</tbody></table>")[0]}},y="bogus",C=function(t){var n=new g,i=new k,o=new b,a=new m;this.createRange=function(e){return this.focus(e),u.create()},this.saveRange=function(e,t){this.focus(e),e.data("range",u.create()),t&&u.create().collapse().select()},this.saveNode=function(e){for(var t=[],n=0,i=e[0].childNodes.length;i>n;n++)t.push(e[0].childNodes[n]);e.data("childNodes",t)},this.restoreRange=function(e){var t=e.data("range");t&&(t.select(),this.focus(e))},this.restoreNode=function(e){e.html("");for(var t=e.data("childNodes"),n=0,i=t.length;i>n;n++)e[0].appendChild(t[n])},this.reset=function(e){e.html("")},this.html=function(e,t){e.html(t)},this.getHTML=function(e){return e.html()},this.currentStyle=function(e){var t=u.create();return t?t.isOnEditable()&&n.current(t,e):!1};var l=function(e){var n=c.makeLayoutInfo(e).holder();t.bindCustomEvent(n,e.data("callbacks"),"before.command")(e.html(),e)},d=function(e){var n=c.makeLayoutInfo(e).holder();t.bindCustomEvent(n,e.data("callbacks"),"change")(e.html(),e)};this.undo=function(e){l(e),e.data("NoteHistory").undo(),d(e)},this.redo=function(e){l(e),e.data("NoteHistory").redo(),d(e)};for(var f=this,p=this.beforeCommand=function(e){l(e),f.focus(e)},v=this.afterCommand=function(e,t){e.data("NoteHistory").recordUndo(),t||d(e)},C=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],x=0,w=C.length;w>x;x++)this[C[x]]=function(e){return function(t,n){p(t),document.execCommand(e,!1,n),v(t,!0)}}(C[x]);this.insertHorizontalRule=function(){var t=e("<div />");t.addClass("divider"),u.create().insertNode(t[0])},this.tab=function(e,t){var n=this.createRange(e);n.isCollapsed()&&n.isOnCell()?i.tab(n):(p(e),o.insertTab(e,n,t.tabsize),v(e))},this.untab=function(e){var t=this.createRange(e);t.isCollapsed()&&t.isOnCell()&&i.tab(t,!0)},this.insertParagraph=function(e){p(e),o.insertParagraph(e),v(e)},this.insertOrderedList=function(e){p(e),a.insertOrderedList(e),v(e)},this.insertUnorderedList=function(e){p(e),a.insertUnorderedList(e),v(e)},this.indent=function(e){p(e),a.indent(e),v(e)},this.outdent=function(e){p(e),a.outdent(e),v(e)},this.insertImage=function(e,n,i){h.createImage(n,i).then(function(t){p(e),t.css({display:"",width:Math.min(e.width(),t.width())}),u.create().insertNode(t[0]),u.createFromNodeAfter(t[0]).select(),v(e)}).fail(function(){var n=c.makeLayoutInfo(e).holder();t.bindCustomEvent(n,e.data("callbacks"),"image.upload.error")()})},this.insertNode=function(e,t){p(e),u.create().insertNode(t),u.createFromNodeAfter(t).select(),v(e)},this.insertText=function(e,t){p(e);var n=u.create().insertNode(c.createText(t));u.create(n,c.nodeLength(n)).select(),v(e)},this.pasteHTML=function(e,t){p(e);var n=u.create().pasteHTML(t);u.createFromNodeAfter(s.last(n)).select(),v(e)},this.formatBlock=function(e,t){p(e),t=r.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t),v(e)},this.formatPara=function(e){p(e),this.formatBlock(e,"P"),v(e)};for(var x=1;6>=x;x++)this["formatH"+x]=function(e){return function(t){this.formatBlock(t,"H"+e)}}(x);this.fontSize=function(t,i){var o=u.create(),r=o.isCollapsed();if(r){var a=n.styleNodes(o),l=s.head(a);e(a).css({"font-size":i+"px"}),l&&!c.nodeLength(l)&&(l.innerHTML=c.ZERO_WIDTH_NBSP_CHAR,u.createFromNodeAfter(l.firstChild).select(),t.data(y,l))}else p(t),e(n.styleNodes(o)).css({"font-size":i+"px"}),v(t)},this.removeBogus=function(e){var t=e.data(y);if(t){var n=s.find(s.from(t.childNodes),c.isText),i=n.nodeValue.indexOf(c.ZERO_WIDTH_NBSP_CHAR);-1!==i&&n.deleteData(i,1),c.isEmpty(t)&&c.remove(t),e.removeData(y)}},this.lineHeight=function(e,t){p(e),n.stylePara(u.create(),{lineHeight:t}),v(e)},this.unlink=function(e){var t=this.createRange(e);if(t.isOnAnchor()){var n=c.ancestor(t.sc,c.isAnchor);t=u.createFromNode(n),t.select(),p(e),document.execCommand("unlink"),v(e)}},this.createLink=function(t,i,o){var r=i.url,a=i.text,l=i.newWindow,d=i.range,c=d.toString()!==a;p(t),o.onCreateLink&&(r=o.onCreateLink(r));var f=[];if(c){var h=d.insertNode(e("<A>"+a+"</A>")[0]);f.push(h)}else f=n.styleNodes(d,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});e.each(f,function(t,n){e(n).attr("href",r),l?e(n).attr("target","_blank"):e(n).removeAttr("target")});var g=u.createFromNodeBefore(s.head(f)),m=g.getStartPoint(),b=u.createFromNodeAfter(s.last(f)),k=b.getEndPoint();u.create(m.node,m.offset,k.node,k.offset).select(),v(t)},this.getLinkInfo=function(t){this.focus(t);var n=u.create().expand(c.isAnchor),i=e(s.head(n.nodes(c.isAnchor)));return{range:n,text:n.toString(),isNewWindow:i.length?"_blank"===i.attr("target"):!1,url:i.length?i.attr("href"):""}},this.color=function(e,t){var n=JSON.parse(t),i=n.foreColor,o=n.backColor;p(e),i&&document.execCommand("foreColor",!1,i),o&&document.execCommand("backColor",!1,o),v(e)},this.insertTable=function(e,t){var n=t.split("x");p(e);var o=u.create().deleteContents();o.insertNode(i.createTable(n)),v(e)},this.floatMe=function(e,t,n){p(e),n.css("float",t),v(e)},this.imageShape=function(e,t,n){p(e),n.removeClass("img-rounded img-circle img-thumbnail img-bordered"),t&&n.addClass(t),v(e)},this.imageClass=function(e,t,n){p(e),t&&(n.hasClass(t)?n.removeClass(t):n.addClass(t)),v(e)},this.resize=function(e,t,n){p(e),n.css({width:100*t+"%",height:""}),v(e)},this.resizeTo=function(e,t,n){var i;if(n){var o=e.y/e.x,r=t.data("ratio");i={width:r>o?e.x:e.y/r,height:r>o?e.x*r:e.y}}else i={width:e.x,height:e.y};t.css(i)},this.removeMedia=function(n,i,o){p(n),o.detach(),t.bindCustomEvent(e(),n.data("callbacks"),"media.delete")(o,n),v(n)},this.focus=function(e){e.focus(),r.isFF&&!u.create().isOnEditable()&&u.createFromNode(e[0]).normalize().collapse().select()},this.isEmpty=function(e){return c.isEmpty(e[0])||c.emptyPara===e.html()}},x=function(){this.update=function(t,n){var i=function(t,n){t.find(".dropdown-menu li").each(function(){var t=e(this).children("div"),i=t.data("value");i+""==n+""?t.children("i").removeClass("transparent"):t.children("i").addClass("transparent")})},o=function(e,n){var i=t.find(e);i.toggleClass("active",n())};if(n.image){var a=e(n.image);o('.btn[data-event="imageClass"][data-value="img-rounded"]',function(){return a.hasClass("img-rounded")}),o('.btn[data-event="imageClass"][data-value="img-circle"]',function(){return a.hasClass("img-circle")}),o('.btn[data-event="imageClass"][data-value="img-thumbnail"]',function(){return a.hasClass("img-thumbnail")}),o('.btn[data-event="imageClass"][data-value="img-bordered"]',function(){return a.hasClass("img-bordered")}),o('.btn[data-event="imageShape"]:not([data-value])',function(){return!a.is(".img-rounded, .img-circle, .img-thumbnail, .img-bordered")});var s=a.css("float");o('.btn[data-event="floatMe"][data-value="left"]',function(){return"left"===s}),o('.btn[data-event="floatMe"][data-value="right"]',function(){return"right"===s}),o('.btn[data-event="floatMe"][data-value="none"]',function(){return"left"!==s&&"right"!==s});var l=a.attr("style");return o('.btn[data-event="resize"][data-value="1"]',function(){return!!/(^|\s)(max-)?width\s*:\s*100%/.test(l)}),o('.btn[data-event="resize"][data-value="0.5"]',function(){return!!/(^|\s)(max-)?width\s*:\s*50%/.test(l)}),void o('.btn[data-event="resize"][data-value="0.25"]',function(){return!!/(^|\s)(max-)?width\s*:\s*25%/.test(l)})}var d=t.find(".note-fontname[data-name=fontname]");if(d.length){var c=n["font-family"];if(c){for(var u=c.split(","),f=0,h=u.length;h>f&&(c=u[f].replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,""),!r.isFontInstalled(c));f++);d.find(".note-current-fontname").text(c),i(d,c)}}var p=t.find(".note-fontsize[data-name=fontsize]");p.find(".note-current-fontsize").text(n["font-size"]),i(p,parseFloat(n["font-size"]));var v=t.find(".note-height[data-name=lineheight]");i(v,parseFloat(n["line-height"])),o('.btn[data-event="bold"]',function(){return"bold"===n["font-bold"]}),o('.btn[data-event="italic"]',function(){return"italic"===n["font-italic"]}),o('.btn[data-event="underline"]',function(){return"underline"===n["font-underline"]}),o('.btn[data-event="strikethrough"]',function(){return"strikethrough"===n["font-strikethrough"]}),o('.btn[data-event="superscript"]',function(){return"superscript"===n["font-superscript"]}),o('.btn[data-event="subscript"]',function(){return"subscript"===n["font-subscript"]}),o('.btn[data-event="justifyLeft"]',function(){return"left"===n["text-align"]||"start"===n["text-align"]}),o('.btn[data-event="justifyCenter"]',function(){return"center"===n["text-align"]}),o('.btn[data-event="justifyRight"]',function(){return"right"===n["text-align"]}),o('.btn[data-event="justifyFull"]',function(){return"justify"===n["text-align"]}),o('.btn[data-event="insertUnorderedList"]',function(){return"unordered"===n["list-style"]}),o('.btn[data-event="insertOrderedList"]',function(){return"ordered"===n["list-style"]})},this.updateRecentColor=function(t,n,i){var o=e(t).closest(".note-color"),r=o.find(".note-recent-color"),a=JSON.parse(r.attr("data-value")),s="backColor"===n?"background-color":"color";a[n]=i,r.attr("data-value",JSON.stringify(a)),r.css(s,i)}},w=function(){var e=new x;this.update=function(t,n){e.update(t,n)},this.updateRecentColor=function(t,n,i){e.updateRecentColor(t,n,i)},this.activate=function(e){e.find("button, .btn").not('.btn[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(e){e.find("button, .btn").not('.btn[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function(e,t){var n=e.find('.btn[data-event="fullscreen"]');n.toggleClass("active",t)},this.updateCodeview=function(e,t){var n=e.find('.btn[data-event="codeview"]');n.toggleClass("active",t),t?this.deactivate(e):this.activate(e)},this.get=function(e,t){var n=c.makeLayoutInfo(e).toolbar();return n.find("[data-name="+t+"]")},this.setButtonState=function(e,t,n){n=n===!1?!1:!0;var i=this.get(e,t);i.toggleClass("active",n)}},T=24,N=function(){var t=e(document);this.attach=function(e,t){t.disableResizeEditor||e.statusbar().on("mousedown",n)};var n=function(e){e.preventDefault(),e.stopPropagation();var n=c.makeLayoutInfo(e.target).editable(),i=n.offset().top-t.scrollTop(),o=c.makeLayoutInfo(e.currentTarget||e.target),r=o.editor().data("options");t.on("mousemove",function(e){var t=e.clientY-(i+T);t=r.minHeight>0?Math.max(t,r.minHeight):t,t=r.maxHeight>0?Math.min(t,r.maxHeight):t,n.height(t)}).one("mouseup",function(){t.off("mousemove")})}},P=function(){var t=new x,n=function(t,n){var i=e(t),o=n?i.offset():i.position(),r=i.outerHeight(!0);return{left:o.left,top:o.top+r}},i=function(e,t){e.css({display:"block",left:t.left,top:t.top})},o=20;this.update=function(r,l,d){t.update(r,l);var c=r.find(".note-link-popover");if(l.anchor){var u=c.find("a"),f=e(l.anchor).attr("href"),h=e(l.anchor).attr("target");u.attr("href",f).html(f),h?u.attr("target","_blank"):u.removeAttr("target"),i(c,n(l.anchor,d))}else c.hide();var p=r.find(".note-image-popover");l.image?i(p,n(l.image,d)):p.hide();var v=r.find(".note-air-popover");if(d&&!l.range.isCollapsed()){var g=s.last(l.range.getClientRects());if(g){var m=a.rect2bnd(g);i(v,{left:Math.max(m.left+m.width/2-o,0),top:m.top+m.height})}}else v.hide()},this.updateRecentColor=function(e,t,n){e.updateRecentColor(e,t,n)},this.hide=function(e){e.children().hide()}},L=function(t){var n=e(document),i=function(i){if(c.isControlSizing(i.target)){i.preventDefault(),i.stopPropagation();var o=c.makeLayoutInfo(i.target),r=o.handle(),a=o.popover(),s=o.editable(),l=o.editor(),d=r.find(".note-control-selection").data("target"),u=e(d),f=u.offset(),h=n.scrollTop(),p=l.data("options").airMode;n.on("mousemove",function(e){t.invoke("editor.resizeTo",{x:e.clientX-f.left,y:e.clientY-(f.top-h)},u,!e.shiftKey),t.invoke("handle.update",r,{image:d},p),t.invoke("popover.update",a,{image:d},p)}).one("mouseup",function(){n.off("mousemove"),t.invoke("editor.afterCommand",s)}),u.data("ratio")||u.data("ratio",u.height()/u.width())}};this.attach=function(e){e.handle().on("mousedown",i)},this.update=function(t,n,i){var o=t.find(".note-control-selection");if(n.image){var r=e(n.image),a=i?r.offset():r.position(),s={w:r.outerWidth(!0),h:r.outerHeight(!0)};o.css({display:"block",left:a.left,top:a.top,width:s.w,height:s.h}).data("target",n.image);var l=s.w+"x"+s.h;o.find(".note-control-selection-info").text(l)}else o.hide()},this.hide=function(e){e.children().hide()}},S=function(t){var n=e(window),i=e("html, body");this.toggle=function(e){var o=e.editor(),r=e.toolbar(),a=e.editable(),s=e.codable(),l=function(e){a.css("height",e.h),s.css("height",e.h),s.data("cmeditor")&&s.data("cmeditor").setsize(null,e.h)};o.toggleClass("fullscreen");var d=o.hasClass("fullscreen");d?(a.data("orgheight",a.css("height")),n.on("resize",function(){l({h:n.height()-r.outerHeight()})}).trigger("resize"),i.css("overflow","hidden"),r.css("top",0)):(n.off("resize"),l({h:a.data("orgheight")}),i.css("overflow","visible")),t.invoke("toolbar.updateFullscreen",r,d)}};r.hasCodeMirror&&(r.isSupportAmd?require(["CodeMirror"],function(e){t=e}):t=window.CodeMirror);var I=function(n){this.sync=function(e){var t=n.invoke("codeview.isActivated",e);t&&r.hasCodeMirror&&e.codable().data("cmEditor").save()},this.isActivated=function(e){var t=e.editor();return t.hasClass("codeview")},this.toggle=function(e){this.isActivated(e)?this.deactivate(e):this.activate(e)},this.activate=function(i){function o(e,t,n,i){var r,a=e.indexOf("<"),s=e.indexOf(">");if(0===a)if(r=e.substring(0,s+1),e=e.substring(s+1),0===r.indexOf("</"))t--,nsideLastBlock=!1;else{n&&t++;for(var l=!1,d=0;d<i.length;d++)if(0===r.indexOf(i[d])){l=!0;break}n=l?!1:!0}else r=e.substring(0,a),e=e.substring(a),n&&t++,n=!1;return r=new Array(t+1).join("    ")+r.trim(),0===e.length?r:r+"\n"+o(e.trim(),t,n,i)}var a=i.editor(),s=i.toolbar(),l=i.editable(),d=i.codable(),u=i.popover(),f=i.handle(),h=a.data("options"),p=c.html(l,!1),v=["<img","<br","<hr"];p=o(p,0,!1,v),d.val(p);var g=s.find(".btn[data-event=codeview]").height(),m=e(window).height()-g;if(d.height(l.height()),n.invoke("toolbar.updateCodeview",s,!0),n.invoke("popover.hide",u),n.invoke("handle.hide",f),a.addClass("codeview"),d.focus(),r.hasCodeMirror){var b=t.fromTextArea(d[0],h.codemirror);if(h.codemirror.tern){var k=new t.TernServer(h.codemirror.tern);b.ternServer=k,b.on("cursorActivity",function(e){k.updateArgHints(e)})}a.hasClass("fullscreen")?b.setSize(null,m):b.setSize(null,l.outerHeight()),d.data("cmEditor",b)}},this.deactivate=function(e){var t=e.holder(),i=e.editor(),o=e.toolbar(),a=e.editable(),s=e.codable(),l=i.data("options");if(r.hasCodeMirror){var d=s.data("cmEditor");s.val(d.getValue()),d.toTextArea()}var u=c.value(s,l.prettifyHtml)||c.emptyPara,f=a.html()!==u;a.html(u),a.height(l.height?s.height():"auto"),i.removeClass("codeview"),f&&n.bindCustomEvent(t,a.data("callbacks"),"change")(a.html(),a),a.focus(),n.invoke("toolbar.updateCodeview",o,!1)}},M=function(t){var n=e(document);this.attach=function(e,t){t.airMode||t.disableDragAndDrop?n.on("drop",function(e){e.preventDefault()}):this.attachDragAndDropEvent(e,t)},this.attachDragAndDropEvent=function(i,o){var r=e(),a=i.editor(),s=i.dropzone(),l=s.find(".note-dropzone-message");n.on("dragenter",function(e){var n=t.invoke("codeview.isActivated",i),d=a.width()>0&&a.height()>0;n||r.length||!d||(a.addClass("dragover"),s.width(a.width()),s.height(a.height()),l.text(o.langInfo.image.dragImageHere)),r=r.add(e.target)}).on("dragleave",function(e){r=r.not(e.target),r.length||a.removeClass("dragover")}).on("drop",function(){r=e(),a.removeClass("dragover")}),s.on("dragenter",function(){s.addClass("hover"),l.text(o.langInfo.image.dropImage)}).on("dragleave",function(){s.removeClass("hover"),l.text(o.langInfo.image.dragImageHere)}),s.on("drop",function(n){var i=n.originalEvent.dataTransfer,o=c.makeLayoutInfo(n.currentTarget||n.target);if(i&&i.files&&i.files.length)n.preventDefault(),o.editable().focus(),t.insertImages(o,i.files);else for(var r=function(){o.holder().materialnote("insertNode",this)},a=0,s=i.types.length;s>a;a++){var l=i.types[a],d=i.getData(l);l.toLowerCase().indexOf("text")>-1?o.holder().materialnote("pasteHTML",d):e(d).each(r)}}).on("dragover",!1)}},R=function(t){var n;this.attach=function(o){(window.clipboardData||r.isFF)&&(n=e("<div />").attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),o.editable().after(n),n.one("paste",i),o.editable().on("keydown",function(e){e.ctrlKey&&86===e.keyCode&&(t.invoke("saveRange",o.editable()),n&&n.focus())})),o.editable().on("paste",i)};var i=function(e){var i=e.originalEvent.clipboardData,o=c.makeLayoutInfo(e.currentTarget||e.target),r=o.editable();if(!i||!i.items||!i.items.length){var a=r.data("callbacks");if(!a.onImageUpload)return;return void setTimeout(function(){if(n){var e=n[0].firstChild;if(e){if(t.invoke("restoreRange",r),c.isImg(e)){for(var i=e.src,a=atob(i.split(",")[1]),s=new Uint8Array(a.length),l=0;l<a.length;l++)s[l]=a.charCodeAt(l);var d=new Blob([s],{type:"image/png"});d.name="clipboard.png",t.invoke("focus",r),t.insertImages(o,[d])}else t.invoke("pasteHTML",r,n.html());n.remove()}}},0)}var l=s.head(i.items),d="file"===l.kind&&-1!==l.type.indexOf("image/");d&&t.insertImages(o,[l.getAsFile()]),t.invoke("editor.afterCommand",r)}},E=function(t){var n=function(e,t){e.toggleClass("disabled",!t),e.attr("disabled",!t)},i=function(e,t){e.on("keypress",function(e){e.keyCode===p.code.ENTER&&t.trigger("click")})};this.showLinkDialog=function(t,o,r){return e.Deferred(function(t){var a=o.find(".note-link-dialog"),s=a.find(".note-link-text"),l=s.next("label"),d=a.find(".note-link-url"),c=a.find(".note-link-btn"),u=a.find(".btnClose"),f=a.find("input[type=checkbox]");a.openModal(),s.val(r.text),r.text.length>0&&l.addClass("active"),s.on("keyup",function(){n(c,s.val()&&d.val()),r.text=s.val()}),u.click(function(e){e.preventDefault(),a.closeModal()}),r.url||(r.url=r.text||"http://",n(c,r.text)),d.on("keyup",function(){n(c,s.val()&&d.val()),r.text||(l.addClass("active"),s.val(d.val()))}).val(r.url).trigger("focus").trigger("select"),i(d,c),i(s,c),f.prop("checked",r.newWindow),c.one("click",function(n){n.preventDefault(),t.resolve({range:r.range,url:d.val(),text:s.val(),newWindow:f.is(":checked")}),e(".note-link-text").val(""),e(".note-link-text").next("label").removeClass("active"),e(".note-link-url").val(""),a.closeModal()})}).promise()},this.show=function(e){var n=e.editor(),i=e.dialog(),o=e.editable(),r=e.popover(),a=t.invoke("editor.getLinkInfo",o),s=n.data("options");t.invoke("editor.saveRange",o),this.showLinkDialog(o,i,a).then(function(e){t.invoke("editor.restoreRange",o),t.invoke("editor.createLink",o,e,s),t.invoke("popover.hide",r)}).fail(function(){t.invoke("editor.restoreRange",o)})}},H=function(t){var n=function(e,t){e.toggleClass("disabled",!t),e.attr("disabled",!t)},i=function(e,t){e.on("keypress",function(e){e.keyCode===p.code.ENTER&&t.trigger("click")})};this.show=function(e){var n=e.dialog(),i=e.editable();t.invoke("editor.saveRange",i),this.showImageDialog(i,n).then(function(n){t.invoke("editor.restoreRange",i),"string"==typeof n?t.invoke("editor.insertImage",i,n):t.insertImages(e,n)}).fail(function(){t.invoke("editor.restoreRange",i)})},this.showImageDialog=function(t,o){return e.Deferred(function(e){var t=o.find(".note-image-dialog"),r=o.find(".note-image-input"),a=o.find(".note-image-url"),s=o.find(".note-image-btn"),l=t.find(".btnClose");t.openModal(),r.replaceWith(r.clone().on("change",function(){e.resolve(this.files||this.value),a.val(""),t.closeModal(),e.resolve()}).val("")),s.click(function(n){n.preventDefault(),e.resolve(a.val()),a.val(""),t.closeModal(),e.resolve()}),l.click(function(e){e.preventDefault(),t.closeModal()}),a.on("keyup paste",function(e){var t;t="paste"===e.type?e.originalEvent.clipboardData.getData("text"):a.val(),n(s,t)}),i(a,s)})}},A=function(t){this.showHelpDialog=function(t,n){return e.Deferred(function(e){var t=n.find(".note-help-dialog");t.openModal(),e.resolve()}).promise()},this.show=function(e){var n=e.dialog(),i=e.editable();t.invoke("editor.saveRange",i,!0),this.showHelpDialog(i,n).then(function(){t.invoke("editor.restoreRange",i)})}},D=function(){var t=this.modules={editor:new C(this),toolbar:new w(this),statusbar:new N(this),popover:new P(this),handle:new L(this),fullscreen:new S(this),codeview:new I(this),dragAndDrop:new M(this),clipboard:new R(this),linkDialog:new E(this),imageDialog:new H(this),helpDialog:new A(this)};this.invoke=function(){var e=s.head(s.from(arguments)),t=s.tail(s.from(arguments)),n=e.split("."),i=n.length>1,o=i&&s.head(n),r=i?s.last(n):s.head(n),a=this.getModule(o),l=a[r];return l&&l.apply(a,t)},this.getModule=function(e){return this.modules[e]||this.modules.editor};var n=this.bindCustomEvent=function(e,t,n){return function(){var i=t[a.namespaceToCamel(n,"on")];return i&&i.apply(e[0],arguments),e.trigger("materialnote."+n,arguments)}};this.insertImages=function(i,o){var r=i.editor(),a=i.editable(),s=i.holder(),l=a.data("callbacks"),d=r.data("options");l.onImageUpload?n(s,l,"image.upload")(o):e.each(o,function(e,i){var o=i.name;d.maximumImageFileSize&&d.maximumImageFileSize<i.size?n(s,l,"image.upload.error")(d.langInfo.image.maximumFileSizeError):h.readFileAsDataURL(i).then(function(e){t.editor.insertImage(a,e,o)}).fail(function(){n(s,l,"image.upload.error")(d.langInfo.image.maximumFileSizeError)})})};var i={showLinkDialog:function(e){t.linkDialog.show(e)},showImageDialog:function(e){t.imageDialog.show(e)},showHelpDialog:function(e){t.helpDialog.show(e)},fullscreen:function(e){t.fullscreen.toggle(e)},codeview:function(e){t.codeview.toggle(e)}},o=function(e){c.isImg(e.target)&&e.preventDefault()},l=function(e){var n=c.makeLayoutInfo(e.currentTarget||e.target);t.editor.removeBogus(n.editable()),d(e)},d=function(e){setTimeout(function(){var n=c.makeLayoutInfo(e.currentTarget||e.target),i=t.editor.currentStyle(e.target);if(i){var o=n.editor().data("options").airMode;o||t.toolbar.update(n.toolbar(),i),t.popover.update(n.popover(),i,o),t.handle.update(n.handle(),i,o)}},0)},u=function(e){var n=c.makeLayoutInfo(e.currentTarget||e.target);t.popover.hide(n.popover()),t.handle.hide(n.handle())},f=function(t){var n=e(t.target).closest("[data-event]");n.length&&t.preventDefault()},g=function(n){var o=e(n.target).closest("[data-event]");if(o.length){var r,a=o.attr("data-event"),l=o.attr("data-value"),u=o.attr("data-hide"),f=c.makeLayoutInfo(n.target);if(-1!==e.inArray(a,["resize","floatMe","removeMedia","imageShape","imageClass"])){var h=f.handle().find(".note-control-selection");r=e(h.data("target"))}if(u&&o.parents(".popover").hide(),e.isFunction(e.materialnote.pluginEvents[a]))e.materialnote.pluginEvents[a](n,t.editor,f,l);else if(t.editor[a]){var p=f.editable();p.focus(),t.editor[a](p,l,r),n.preventDefault()}else i[a]&&(i[a].call(this,f),n.preventDefault());if(-1!==e.inArray(a,["backColor","foreColor"])){var v=f.editor().data("options",v),g=v.airMode?t.popover:t.toolbar;g.updateRecentColor(s.head(o),a,l)}d(n)}},m=26,b=function(t,n){var i,o=e(t.target.parentNode),r=o.parent(),a=o.next(),s=o.find(".note-dimension-picker-mousecatcher"),l=o.find(".note-dimension-picker-highlighted"),d=o.find(".note-dimension-picker-unhighlighted"),c=r.find("[id$='-hoverable']"),u=r.find("[id$='-bordered']"),f=r.find("[id$='-striped']"),h=r.find("[id$='-responsive']");if(void 0===t.offsetX){var p=e(t.target).offset();i={x:t.pageX-p.left,y:t.pageY-p.top}}else i={x:t.offsetX,y:t.offsetY};var v={c:Math.ceil(i.x/m)||1,r:Math.ceil(i.y/m)||1},g=[];c.is(":checked")&&g.push("hoverable"),u.is(":checked")&&g.push("bordered"),f.is(":checked")&&g.push("striped"),h.is(":checked")&&g.push("responsive-table"),l.css({width:v.c*m+"px",height:v.r*m+"px"}),s.attr("data-value",v.c+"x"+v.r+"x"+g.join("x")),d.css({width:n.insertTableMaxSize*m+"px"}),3<v.r&&v.r<n.insertTableMaxSize.row&&d.css({height:(v.r+1)*m+"px"}),a.html(v.c+" x "+v.r)};this.bindKeyMap=function(n,o){var r=n.editor(),a=n.editable();a.on("keydown",function(s){var l=[];s.metaKey&&l.push("CMD"),s.ctrlKey&&!s.altKey&&l.push("CTRL"),s.shiftKey&&l.push("SHIFT");var d=p.nameFromCode[s.keyCode];d&&l.push(d);var c,u=l.join("+"),f=o[u];if(f){if(c=e.materialnote.pluginEvents[u],e.isFunction(c)&&c(s,t.editor,n))return!1;c=e.materialnote.pluginEvents[f],e.isFunction(c)?c(s,t.editor,n):t.editor[f]?(t.editor[f](a,r.data("options")),s.preventDefault()):i[f]&&(i[f].call(this,n),s.preventDefault())}else p.isEdit(s.keyCode)&&t.editor.afterCommand(a)})},this.attach=function(e,n){n.shortcuts&&this.bindKeyMap(e,n.keyMap[r.isMac?"mac":"pc"]),e.editable().on("mousedown",o),e.editable().on("keyup mouseup",l),e.editable().on("scroll",u),t.clipboard.attach(e,n),t.handle.attach(e,n),e.popover().on("click",g),e.popover().on("mousedown",f),t.dragAndDrop.attach(e,n),n.airMode||(e.toolbar().on("click",g),e.toolbar().on("mousedown",f),t.statusbar.attach(e,n));var i=n.airMode?e.popover():e.toolbar(),a=i.find(".note-dimension-picker-mousecatcher");a.css({width:n.insertTableMaxSize.col*m+"px",height:n.insertTableMaxSize.row*m+"px"}).on("mousemove",function(e){b(e,n)}),e.editor().data("options",n),r.isMSIE||setTimeout(function(){document.execCommand("styleWithCSS",0,n.styleWithSpan)},0);var d=new v(e.editable());e.editable().data("NoteHistory",d),e.editable().data("callbacks",{onInit:n.onInit,onFocus:n.onFocus,onBlur:n.onBlur,onKeydown:n.onKeydown,onKeyup:n.onKeyup,onMousedown:n.onMousedown,onEnter:n.onEnter,onPaste:n.onPaste,onBeforeCommand:n.onBeforeCommand,onChange:n.onChange,onImageUpload:n.onImageUpload,onImageUploadError:n.onImageUploadError,onMediaDelete:n.onMediaDelete,onToolbarClick:n.onToolbarClick}),c.isTextarea(s.head(e.holder()))&&e.holder().closest("form").submit(function(){e.holder().val(e.holder().code())})},this.attachCustomEvent=function(t,i){var o=t.holder(),a=t.editable(),l=a.data("callbacks");a.focus(n(o,l,"focus")),a.blur(n(o,l,"blur")),a.keydown(function(e){e.keyCode===p.code.ENTER&&n(o,l,"enter").call(this,e),n(o,l,"keydown").call(this,e)}),a.keyup(n(o,l,"keyup")),a.on("mousedown",n(o,l,"mousedown")),a.on("mouseup",n(o,l,"mouseup")),a.on("scroll",n(o,l,"scroll")),a.on("paste",n(o,l,"paste"));var d=r.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";a.on(d,function(){n(o,l,"change")(a.html(),a)}),i.airMode||(t.toolbar().click(n(o,l,"toolbar.click")),t.popover().click(n(o,l,"popover.click"))),c.isTextarea(s.head(o))&&o.closest("form").submit(function(e){n(o,l,"submit").call(this,e,o.code())}),n(o,l,"init")(t);for(var u=0,f=e.materialnote.plugins.length;f>u;u++)e.isFunction(e.materialnote.plugins[u].init)&&e.materialnote.plugins[u].init(t)},this.detach=function(e,t){e.holder().off(),e.editable().off(),e.popover().off(),e.handle().off(),e.dialog().off(),t.airMode||(e.dropzone().off(),e.toolbar().off(),e.statusbar().off())}},F=function(){var t=function(e,t){var n=t.event,i=t.value,o=t.title,r=t.style,a=t.btnClassName,s=t.className,l=t.dropdown,d=t.hide;if(l){var c=['<div class="btn-group',(s?" "+s:"")+'">','<button class="waves-effect waves-light btn dropdown '+(a?a:"")+'"',o?' title="'+o+'"':"",n?' data-event="'+n+'"':"",i?" data-value='"+i+"'":"",d?" data-hide='"+d+"'":"",'><i class="material-icons left">arrow_drop_down</i>'+e+"</button>",l,"</div>"].join("");return c}var u=['<div class="waves-effect waves-light btn',(s?" "+s:"")+'"',o?' title="'+o+'"':"",r?' style="'+r+'"':"",n?' data-event="'+n+'"':"",i?" data-value='"+i+"'":"",d?" data-hide='"+d+"'":"",' tabindex="-1">'+e+"</div>"].join("");return u},n=function(e,n){var i='<i class="material-icons">'+e+"</i>";return t(i,n)},i=function(t,n){var i=e('<div class="'+t+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');return i.find(".popover-content").append(n),i},o=function(e,t,n,i){var o=['<div class="'+e+' modal modal-fixed-footer">','<div class="modal-content">',t?"<h4>"+t+"</h4>":"","<p>"+n+"</p>","</div>",i?'<div class="modal-footer">'+i+"</div>":"","</div>"].join("");return o},s={picture:function(e,t){return n(t.iconPrefix+t.icons.image.image,{event:"showImageDialog",title:e.image.image,hide:!0})},link:function(e,t){return n(t.iconPrefix+t.icons.link.link,{event:"showLinkDialog",title:e.link.link,hide:!0})},table:function(e,t){var i='<ul class="note-table dropdown-menu"><div class="row"><div class="col s6 preventDropClose"><input type="checkbox" id="'+materialUniqueId+'-bordered" checked="checked" /><label for="'+materialUniqueId+'-bordered">'+e.table.bordered+'</label></div><div class="col s6 preventDropClose"><input type="checkbox" id="'+materialUniqueId+'-striped" checked="checked" /><label for="'+materialUniqueId+'-striped">'+e.table.striped+'</label></div></div><div class="row"><div class="col s6 preventDropClose"><input type="checkbox" id="'+materialUniqueId+'-hoverable" checked="checked" /><label for="'+materialUniqueId+'-hoverable">'+e.table.hoverable+'</label></div><div class="col s6 preventDropClose"><input type="checkbox" id="'+materialUniqueId+'-responsive" checked="checked" /><label for="'+materialUniqueId+'-responsive">'+e.table.responsive+'</label></div></div><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>';
    return n(t.iconPrefix+t.icons.table.table,{title:e.table.table,dropdown:i})},style:function(e,t){var i=t.styleTags.reduce(function(t,n){var i=e.style["p"===n?"normal":n];return t+'<li><div data-event="formatBlock" data-value="'+n+'">'+("p"===n||"pre"===n?i:"<"+n+">"+i+"</"+n+">")+"</div></li>"},"");return n(t.iconPrefix+t.icons.style.style,{title:e.style.style,dropdown:'<ul class="dropdown-menu largeDropdown">'+i+"</ul>"})},fontname:function(e,n){var i=[],o=n.fontNames.reduce(function(e,t){return r.isFontInstalled(t)||-1!==n.fontNamesIgnoreCheck.indexOf(t)?(i.push(t),e+'<li><div data-event="fontName" href="#" data-value="'+t+'" style="font-family:\''+t+'\'"><i class="material-icons tiny transparent">'+n.iconPrefix+n.icons.misc.check+"</i> "+t+"</div></li>"):e},""),a=r.isFontInstalled(n.defaultFontName),s=a?n.defaultFontName:i[0],l='<div class="note-current-fontname">'+s+"</div>";return t(l,{title:e.font.name,className:"note-fontname",dropdown:'<ul class="dropdown-menu note-check">'+o+"</ul>"})},fontsize:function(e,n){var i=n.fontSizes.reduce(function(e,t){return e+'<li><div data-event="fontSize" href="#" data-value="'+t+'"><i class="material-icons tiny transparent">'+n.iconPrefix+n.icons.misc.check+"</i> "+t+"</div></li>"},""),o='<span class="note-current-fontsize">15</span>';return t(o,{title:e.font.size,className:"note-fontsize",dropdown:'<ul class="dropdown-menu note-check">'+i+"</ul>"})},color:function(e,n){var i='<i class="material-icons">'+n.icons.color.recent+"</i>",o=t(i,{className:"note-recent-color",title:e.color.recent,style:"color: "+n.defaultTextColor+"; background-color: "+n.defaultBackColor+";",event:"color",value:'{"backColor": "'+n.defaultBackColor+'"}'}),r='<ul id="colors" class="dropdown-menu"><li><div class="col s12"><ul class="tabs"><li class="tab"><a href="#'+materialUniqueId+'-foreColor" class="active">'+e.color.foreground+'</a></li><li class="tab"><a href="#'+materialUniqueId+'-backColor">'+e.color.background+'</a></li></ul></div><div class="col s12 colorTable"><div id="'+materialUniqueId+'-foreColor"><div class="note-color-reset waves-effect waves-light btn" data-event="foreColor" data-value="'+n.defaultTextColor+'" title="'+e.color.reset+'">'+e.color.resetToDefault+'</div><div class="colorName"></div><div class="note-color-palette" data-target-event="foreColor"></div></div><div id="'+materialUniqueId+'-backColor"><div class="note-color-reset waves-effect waves-light btn" data-event="backColor" data-value="'+n.defaultBackColor+'" title="'+e.color.transparent+'">'+e.color.setTransparent+'</div><div class="colorName"></div><div class="note-color-palette" data-target-event="backColor"></div></div></div></li></ul>',a=t("",{title:e.color.more,className:"closeLeft",dropdown:r});return a+o},bold:function(e,t){return n(t.iconPrefix+t.icons.font.bold,{event:"bold",title:e.font.bold})},italic:function(e,t){return n(t.iconPrefix+t.icons.font.italic,{event:"italic",title:e.font.italic})},underline:function(e,t){return n(t.iconPrefix+t.icons.font.underline,{event:"underline",title:e.font.underline})},strikethrough:function(e,t){return n(t.iconPrefix+t.icons.font.strikethrough,{event:"strikethrough",title:e.font.strikethrough})},superscript:function(e,t){return n(t.iconPrefix+t.icons.font.superscript,{event:"superscript",title:e.font.superscript})},subscript:function(e,t){return n(t.iconPrefix+t.icons.font.subscript,{event:"subscript",title:e.font.subscript})},clear:function(e,t){return n(t.iconPrefix+t.icons.font.clear,{event:"removeFormat",title:e.font.clear})},ul:function(e,t){return n(t.iconPrefix+t.icons.lists.unordered,{event:"insertUnorderedList",title:e.lists.unordered})},ol:function(e,t){return n(t.iconPrefix+t.icons.lists.ordered,{event:"insertOrderedList",title:e.lists.ordered})},leftButton:function(e,t){return n(t.iconPrefix+t.icons.paragraph.left,{title:e.paragraph.left,event:"justifyLeft"})},centerButton:function(e,t){return n(t.iconPrefix+t.icons.paragraph.center,{title:e.paragraph.center,event:"justifyCenter"})},rightButton:function(e,t){return n(t.iconPrefix+t.icons.paragraph.right,{title:e.paragraph.right,event:"justifyRight"})},justifyButton:function(e,t){return n(t.iconPrefix+t.icons.paragraph.justify,{title:e.paragraph.justify,event:"justifyFull"})},outdentButton:function(e,t){return n(t.iconPrefix+t.icons.paragraph.outdent,{title:e.paragraph.outdent,event:"outdent"})},indentButton:function(e,t){return n(t.iconPrefix+t.icons.paragraph.indent,{title:e.paragraph.indent,event:"indent"})},paragraph:function(e,t){var i=n(t.iconPrefix+t.icons.paragraph.left,{title:e.paragraph.left,event:"justifyLeft"}),o=n(t.iconPrefix+t.icons.paragraph.center,{title:e.paragraph.center,event:"justifyCenter"}),r=n(t.iconPrefix+t.icons.paragraph.right,{title:e.paragraph.right,event:"justifyRight"}),a=n(t.iconPrefix+t.icons.paragraph.justify,{title:e.paragraph.justify,event:"justifyFull"}),s=n(t.iconPrefix+t.icons.paragraph.outdent,{title:e.paragraph.outdent,event:"outdent"}),l=n(t.iconPrefix+t.icons.paragraph.indent,{title:e.paragraph.indent,event:"indent"}),d='<ul class="dropdown-menu"><div class="note-align btn-group">'+i+o+r+a+'</div><div class="note-list btn-group">'+l+s+"</div></ul>";return n(t.iconPrefix+t.icons.paragraph.paragraph,{title:e.paragraph.paragraph,dropdown:d})},lineheight:function(e,t){var i=t.lineHeights.reduce(function(e,n){return e+'<li><div data-event="lineHeight" href="#" data-value="'+parseFloat(n)+'"><i class="material-icons tiny transparent">'+t.iconPrefix+t.icons.misc.check+"</i> "+n+"</div></li>"},"");return n(t.iconPrefix+t.icons.font.height,{title:e.font.height,className:"note-height",dropdown:'<ul class="dropdown-menu note-check">'+i+"</ul>"})},help:function(e,t){return n(t.iconPrefix+t.icons.options.help,{event:"showHelpDialog",title:e.options.help,hide:!0})},fullscreen:function(e,t){return n(t.iconPrefix+t.icons.options.fullscreen,{event:"fullscreen",title:e.options.fullscreen})},codeview:function(e,t){return n(t.iconPrefix+t.icons.options.codeview,{event:"codeview",title:e.options.codeview})},undo:function(e,t){return n(t.iconPrefix+t.icons.history.undo,{event:"undo",title:e.history.undo})},redo:function(e,t){return n(t.iconPrefix+t.icons.history.redo,{event:"redo",title:e.history.redo})},hr:function(e,t){return n(t.iconPrefix+t.icons.hr.insert,{event:"insertHorizontalRule",title:e.hr.insert})}},l=function(o,r){var a=function(){var e=n(r.iconPrefix+r.icons.link.edit,{title:o.link.edit,event:"showLinkDialog",hide:!0}),t=n(r.iconPrefix+r.icons.link.unlink,{title:o.link.unlink,event:"unlink"}),a='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+e+t+"</div>";return i("note-link-popover",a)},l=function(){var e=(t('<span class="note-fontsize-10">100%</span>',{title:o.image.resizeFull,event:"resize",value:"1"}),t('<span class="note-fontsize-10">50%</span>',{title:o.image.resizeHalf,event:"resize",value:"0.5"}),t('<span class="note-fontsize-10">25%</span>',{title:o.image.resizeQuarter,event:"resize",value:"0.25"}),n(r.iconPrefix+r.icons.image.floatLeft,{title:o.image.floatLeft,event:"floatMe",value:"left"})),a=n(r.iconPrefix+r.icons.image.floatRight,{title:o.image.floatRight,event:"floatMe",value:"right"}),s=n(r.iconPrefix+r.icons.image.floatNone,{title:o.image.floatNone,event:"floatMe",value:"none"}),l=n(r.iconPrefix+r.icons.image.shapeRounded,{title:o.image.shapeRounded,event:"imageClass",value:"img-rounded"}),d=n(r.iconPrefix+r.icons.image.shapeCircle,{title:o.image.shapeCircle,event:"imageClass",value:"img-circle"}),c=n(r.iconPrefix+r.icons.image.shapeThumbnail,{title:o.image.shapeThumbnail,event:"imageClass",value:"img-thumbnail"}),u=n(r.iconPrefix+r.icons.image.bordered,{title:o.image.bordered,event:"imageClass",value:"img-bordered"}),f=n(r.iconPrefix+r.icons.image.shapeNone,{title:o.image.shapeNone,event:"imageShape",value:""}),h=n(r.iconPrefix+r.icons.image.remove,{title:o.image.remove,event:"removeMedia",value:"none"}),p='<div class="btn-group">'+e+a+s+'</div><div class="btn-group">'+l+d+c+u+f+'</div><div class="btn-group">'+h+"</div>";return i("note-image-popover",p)},d=function(){for(var t=e("<div />"),n=0,a=r.airPopover.length;a>n;n++){for(var l=r.airPopover[n],d=e('<div class="note-'+l[0]+' btn-group">'),c=0,u=l[1].length;u>c;c++){var f=e(s[l[1][c]](o,r));f.attr("data-name",l[1][c]),d.append(f)}t.append(d)}return i("note-air-popover",t.children())},c=e('<div class="note-popover" />');return c.append(a()),c.append(l()),r.airMode&&c.append(d()),c},d=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'},u=function(e,t){var n=[];for(var i in t)t.hasOwnProperty(i)&&n.push("<tr><td>"+t[i].kbd+"</td><td>"+t[i].text+"</td></tr>");return"<thead><tr><th>"+e+"</th><th>(keys)</th></tr></thead><tbody>"+n.join("")+"</tbody>"},f=function(e){var t=[{kbd:" + B",text:e.font.bold},{kbd:" + I",text:e.font.italic},{kbd:" + U",text:e.font.underline},{kbd:" + \\",text:e.font.clear}];return u(e.shortcut.textFormatting,t)},h=function(e){var t=[{kbd:" + Z",text:e.history.undo},{kbd:" +  + Z",text:e.history.redo},{kbd:" + ]",text:e.paragraph.indent},{kbd:" + [",text:e.paragraph.outdent},{kbd:" + ENTER",text:e.hr.insert}];return u(e.shortcut.action,t)},p=function(e){var t=[{kbd:" +  + L",text:e.paragraph.left},{kbd:" +  + E",text:e.paragraph.center},{kbd:" +  + R",text:e.paragraph.right},{kbd:" +  + J",text:e.paragraph.justify},{kbd:" +  + NUM7",text:e.lists.ordered},{kbd:" +  + NUM8",text:e.lists.unordered}];return u(e.shortcut.paragraphFormatting,t)},v=function(e){var t=[{kbd:" + NUM0",text:e.style.normal},{kbd:" + NUM1",text:e.style.h1},{kbd:" + NUM2",text:e.style.h2},{kbd:" + NUM3",text:e.style.h3},{kbd:" + NUM4",text:e.style.h4},{kbd:" + NUM5",text:e.style.h5},{kbd:" + NUM6",text:e.style.h6}];return u(e.shortcut.documentStyle,t)},g=function(e,t){var n=['<table class="striped hoverable">'+h(e,t)+"</table>",'<table class="striped hoverable">'+v(e,t)+"</table>",'<table class="striped hoverable">'+f(e,t)+"</table>",'<table class="striped hoverable">'+p(e,t)+"</table>"].join("<br>");return t.extraKeys,n},m=function(e){return e.replace(//g,"Ctrl").replace(//g,"Shift")},b={image:function(e,t){var n="";if(t.maximumImageFileSize){var i=Math.floor(Math.log(t.maximumImageFileSize)/Math.log(1024)),r=1*(t.maximumImageFileSize/Math.pow(1024,i)).toFixed(2)+" "+" KMGTP"[i]+"B";n="<small>"+e.image.maximumFileSize+" : "+r+"</small>"}var a='<div class="row"><div class="col s12"><div class="file-field input-field"><div class="btn"><span>'+e.image.image+'</span><input class="note-image-input" name="files" type="file" /></div><div class="file-path-wrapper"><input class="file-path" type="text" /></div></div></div></div><div class="row"><div class="input-field col s12"><input class="note-image-url" type="text" /><label>'+e.image.url+"</label></div></div>",s='<button href="#" class="waves-effect waves-light btn note-image-btn disabled" disabled>'+e.image.insert+'</button><button class="waves-effect waves-light btn btnClose">'+e.shortcut.close+"</button>";return o("note-image-dialog",e.image.insert,a,s)},link:function(e,t){var n='<div class="row"><div class="input-field col s12"><input class="note-link-text" type="text" /><label>'+e.link.textToDisplay+'</label></div></div><div class="row"><div class="input-field col s12"><input class="note-link-url" type="text" value="http://" /><label class="active">'+e.link.url+"</label></div></div>"+(t.disableLinkTarget?"":'<div class="row"><div class="col s12"><input type="checkbox" id="'+materialUniqueId+'-noteInsertLinkNewWindow" checked="checked" /><label for="'+materialUniqueId+'-noteInsertLinkNewWindow">'+e.link.openInNewWindow+"</label></div></div>"),i='<button href="#" class="waves-effect waves-light btn note-link-btn disabled" disabled>'+e.link.insert+'</button><button class="waves-effect waves-light btn btnClose">'+e.shortcut.close+"</button>";return o("note-link-dialog",e.link.insert,n,i)},help:function(e,t){var n=r.isMac?g(e,t):m(g(e,t)),i='<button href="#" class="waves-effect waves-light btn modal-close">'+e.shortcut.close+"</button>";return o("note-help-dialog",e.shortcut.shortcuts,n,i)}},k=function(t,n){var i="";return e.each(b,function(e,o){i+=o(t,n)}),'<div class="note-dialog">'+i+"</div>"},y=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'},C=function(e){return r.isMac&&(e=e.replace("CMD","").replace("SHIFT","")),e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")},x=function(t,n,i){e(document).ready(function(){var i=a.invertObject(n),o=t.find(".btn");o.each(function(t,n){var o=e(n),r=i[o.data("event")],a=o.attr("title");r&&o.attr("data-tooltip",function(t,n){return a=a+" ("+C(r)+")",e(this).removeAttr("title"),a}),o.attr("data-position","bottom"),o.attr("data-tooltip",a),o.removeAttr("title")}).ckTooltip({container:t,position:"top",delay:30})})},w=function(t,n){var i=n.colors,o=n.colorTitles;t.find(".note-color-palette").each(function(){for(var t=e(this),n=t.attr("data-target-event"),r=[],a=0,s=i.length;s>a;a++){for(var l=i[a],d=o[a],c=[],u=0,f=l.length;f>u;u++){var h=l[u],p=d[u];c.push(['<button type="button" class="note-color-btn" style="background-color:',h,';" data-event="',n,'" data-value="',h,'" data-description="',p,'" data-toggle="button" tabindex="-1"></button>'].join(""))}r.push('<div class="note-color-row">'+c.join("")+"</div>")}t.html(r.join("")),t.find("button").mouseenter(function(){t.siblings(".colorName").html(e(this).data("description"))}),t.mouseleave(function(){e(this).siblings(".colorName").html("")})})};this.createLayoutByAirMode=function(t,n){var i=n.langInfo,o=n.keyMap[r.isMac?"mac":"pc"],s=a.uniqueId();t.addClass("note-air-editor note-editable"),t.attr({id:"note-editor-"+s,contentEditable:!0});var c=document.body,u=e(l(i,n));u.addClass("note-air-layout"),u.attr("id","note-popover-"+s),u.appendTo(c),x(u,o),w(u,n);var f=e(d());f.addClass("note-air-layout"),f.attr("id","note-handle-"+s),f.appendTo(c);var h=e(k(i,n));h.addClass("note-air-layout"),h.attr("id","note-dialog-"+s),h.find("button.close, a.modal-close").click(function(){e(this).closest(".modal").closeModal()}),h.appendTo(c)},this.createLayoutByFrame=function(t,n){function i(){e(window).scroll(function(){var t=a.hasClass("fullscreen");if(t)return!1;var i,o,r,s,l,d,c,u,f,h=a.children(".note-toolbar"),p=(h.outerHeight(),a.children(".note-editable")),v=p.outerHeight();a.width;f=e("."+n.otherStaticBarClass).outerHeight(),f||(f=0),c=e(document).scrollTop(),i=h.offset().top,o=a.offset().top,r=o+v,s=i-f,d=r-f,l=o-f,c>s&&d>c?(u=c-a.offset().top+f,h.css({top:u+"px","z-index":2e3})):i>c&&d>c&&(h.css({top:0,"z-index":1052}),c>l&&(u=c-a.offset().top+f,h.css({top:u+"px","z-index":2e3})))})}var o=n.langInfo,a=e('<div class="note-editor"></div>');n.width&&a.width(n.width),n.height>0&&e('<div class="note-statusbar">'+(n.disableResizeEditor?"":y())+"</div>").prependTo(a);var u=!t.is(":disabled"),f=e('<div class="note-editable" contentEditable="'+u+'"></div>').prependTo(a);n.height&&f.height(n.height),n.direction&&f.attr("dir",n.direction);var h=t.attr("placeholder")||n.placeholder;h&&f.attr("data-placeholder",h),f.html(c.html(t)),e('<textarea class="note-codable"></textarea>').prependTo(a);for(var p=e('<div class="note-toolbar btn-toolbar" />'),v=0,g=n.toolbar.length;g>v;v++){for(var m=n.toolbar[v][0],b=n.toolbar[v][1],C=e('<div class="note-'+m+' btn-group" />'),T=0,N=b.length;N>T;T++){var P=s[b[T]];if(e.isFunction(P)){var L=e(P(o,n));L.attr("data-name",b[T]),C.append(L)}}p.append(C)}p.prependTo(a);var S=n.keyMap[r.isMac?"mac":"pc"];w(p,n),x(p,S,"bottom"),n.followingToolbar&&i();var I=e(l(o,n)).prependTo(a);w(I,n),x(I,S),e(d()).prependTo(a);var M=e(k(o,n)).prependTo(a);M.find("button.close, a.modal-close").click(function(){e(this).closest(".modal").closeModal()}),e('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(a),a.insertAfter(t),t.hide()},this.hasNoteEditor=function(e){return this.noteEditorFromHolder(e).length>0},this.noteEditorFromHolder=function(t){return t.hasClass("note-air-editor")?t:t.next().hasClass("note-editor")?t.next():e()},this.createLayout=function(e,t){t.airMode?this.createLayoutByAirMode(e,t):this.createLayoutByFrame(e,t)},this.layoutInfoFromHolder=function(e){var t=this.noteEditorFromHolder(e);if(t.length)return t.data("holder",e),c.buildLayoutInfo(t)},this.removeLayout=function(e,t,n){n.airMode?(e.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),t.popover().remove(),t.handle().remove(),t.dialog().remove()):(e.html(t.editable().html()),t.editor().remove(),e.show())},this.getTemplate=function(){return{button:t,iconButton:n,dialog:o}},this.addButtonInfo=function(e,t){s[e]=t},this.addDialogInfo=function(e,t){b[e]=t}};e.materialnote=e.materialnote||{},e.extend(e.materialnote,f);var B=new F,U=new D;e.extend(e.materialnote,{renderer:B,eventHandler:U,core:{agent:r,list:s,dom:c,range:u},pluginEvents:{},plugins:[]}),e.materialnote.addPlugin=function(t){e.materialnote.plugins.push(t),t.buttons&&e.each(t.buttons,function(e,t){B.addButtonInfo(e,t)}),t.dialogs&&e.each(t.dialogs,function(e,t){B.addDialogInfo(e,t)}),t.events&&e.each(t.events,function(t,n){e.materialnote.pluginEvents[t]=n}),t.langs&&e.each(t.langs,function(t,n){e.materialnote.lang[t]&&e.extend(e.materialnote.lang[t],n)}),t.options&&e.extend(e.materialnote.options,t.options)},e.fn.extend({materialnote:function(){var t=e.type(s.head(arguments)),n="string"===t,i="object"===t,o=i?s.head(arguments):{};if(o=e.extend({},e.materialnote.options,o),o.icons=e.extend({},e.materialnote.options.icons,o.icons),o.langInfo=e.extend(!0,{},e.materialnote.lang["en-US"],e.materialnote.lang[o.lang]),!n&&i)for(var r=0,a=e.materialnote.plugins.length;a>r;r++){var l=e.materialnote.plugins[r];o.plugin[l.name]&&(e.materialnote.plugins[r]=e.extend(!0,l,o.plugin[l.name]))}this.each(function(t,n){materialUniqueId=e(n).attr("id");var i=e(n);if(!B.hasNoteEditor(i)){B.createLayout(i,o);var r=B.layoutInfoFromHolder(i);i.data("layoutInfo",r),U.attach(r,o),U.attachCustomEvent(r,o)}});var d=this.first();if(d.length){var c=B.layoutInfoFromHolder(d);if(n){var u=s.head(s.from(arguments)),f=s.tail(s.from(arguments)),h=[u,c.editable()].concat(f);return U.invoke.apply(U,h)}o.focus&&c.editable().focus()}return e(this).each(function(t,n){function i(t,i){var r=e(t).next("ul.dropdown-menu");e(t).parent(".btn-group");r.slideUp(0),e(".preventDropClose").click(function(e){e.stopPropagation()}),e(t).click(function(o){var l=Math.round(e(t).parent(".btn-group").offset().left-a.offset().left),d=parseInt(r.css("border-left-width")),c=n.outerWidth(),u=d;r.css({"max-width":c+"px"});var f=r.outerWidth(),h=f+l;h>=c&&(u=h-c,s||(u+=d)),r.css({left:"-"+u+"px"});var p=!0;r.is(":visible")&&(p=!1),i.find("ul.dropdown-menu").slideUp(200),p&&r.slideToggle(200),o.stopPropagation()}),o.unbind().click(function(e){d=!1})}var o,r,a,s=!1;if(e(n).hasClass("note-air-editor")){var l=e(this).attr("id");l&&(l=l.substring(l.lastIndexOf("-")+1,l.length)),n=e("#note-popover-"+l).find(".note-air-popover"),r=n.find("ul.tabs"),o=n.find("li.tab a"),a=e(n).find(".popover-content button.dropdown"),s=!0}else n=e(n).next(".note-editor"),r=n.find("ul.tabs"),o=n.find("li.tab a"),a=e(n).find(".note-toolbar button.dropdown");var d=!0;e(window).click(function(e){d&&n.find("ul.dropdown-menu").slideUp(200),d=!0,e.stopPropagation()}),a.each(function(e,t){i(t,n)}),r.tabs()}),this},code:function(t){if(void 0===t){var n=this.first();if(!n.length)return;var i=B.layoutInfoFromHolder(n),o=i&&i.editable();if(o&&o.length){var r=U.invoke("codeview.isActivated",i);return U.invoke("codeview.sync",i),r?i.codable().val():i.editable().html()}return c.value(n)}return this.each(function(n,i){var o=B.layoutInfoFromHolder(e(i)),r=o&&o.editable();r&&r.html(t)}),this},destroy:function(){return this.each(function(t,n){var i=e(n);if(B.hasNoteEditor(i)){var o=B.layoutInfoFromHolder(i),r=o.editor().data("options");U.detach(o,r),B.removeLayout(i,o,r)}}),this}})}),function(e){e.fn.ckTooltip=function(t){var n=null,i=!1,o=null,r=5,a={delay:350};return t=e.extend(a,t),this.each(function(){var a=e(this),s=e("<span></span>").text(a.attr("data-tooltip")),l=e("<div></div>");l.addClass("material-tooltip").append(s),l.appendTo(e("body"));var d=e("<div></div>").addClass("backdrop");d.appendTo(l),d.css({top:0,left:0}),e.event.special.destroyed={remove:function(e){e.handler&&e.handler()}},e(this).bind("destroyed",function(){l.remove()}),e(this).on({mouseenter:function(e){var s=a.data("delay");s=void 0===s||""===s?t.delay:s,n=0,o=setInterval(function(){if(n+=10,n>=s&&i===!1){i=!0,l.css({display:"block",left:"0px",top:"0px"}),l.children("span").text(a.attr("data-tooltip"));var e=a.outerWidth(),t=a.outerHeight(),o=a.attr("data-position"),c=l.outerHeight(),u=l.outerWidth(),f="0px",h="0px",p=8;"top"===o?(l.css({top:a.offset().top-c-r,left:a.offset().left+e/2-u/2}),f="-10px",d.css({borderRadius:"14px 14px 0 0",transformOrigin:"50% 90%",marginTop:c,marginLeft:u/2-d.width()/2})):"left"===o?(l.css({top:a.offset().top+t/2-c/2,left:a.offset().left-u-r}),h="-10px",d.css({width:"14px",height:"14px",borderRadius:"14px 0 0 14px",transformOrigin:"95% 50%",marginTop:c/2,marginLeft:u})):"right"===o?(l.css({top:a.offset().top+t/2-c/2,left:a.offset().left+e+r}),h="+10px",d.css({width:"14px",height:"14px",borderRadius:"0 14px 14px 0",transformOrigin:"5% 50%",marginTop:c/2,marginLeft:"0px"})):(l.css({top:a.offset().top+a.outerHeight()+r,left:a.offset().left+e/2-u/2}),f="+10px",d.css({marginLeft:u/2-d.width()/2})),p=u/8,8>p&&(p=8),("right"===o||"left"===o)&&(p=u/10,6>p&&(p=6)),l.velocity({opacity:1,marginTop:f,marginLeft:h},{duration:150,queue:!1}),d.css({display:"block"}).velocity({opacity:1},{duration:50,delay:0,queue:!1}).velocity({scale:p},{duration:150,delay:0,queue:!1,easing:"easeInOutQuad"})}},10)},mouseleave:function(){clearInterval(o),n=0,l.velocity({opacity:0,marginTop:0,marginLeft:0},{duration:150,queue:!1,delay:50}),d.velocity({opacity:0,scale:1},{duration:150,delay:50,queue:!1,complete:function(){d.css("display","none"),l.css("display","none"),i=!1}})}})})}}(jQuery);