!function(t,a){var e=1e3,n=!1,i=t([]),o=function(e,n){var o=e.data("livestampdata");if("number"==typeof n&&(n*=1e3),e.removeAttr("data-livestamp").removeData("livestamp"),n=a(new Date(n)),a.isMoment(n)&&!isNaN(+n)){var m=t.extend({},{original:e.contents()},o);m.moment=a(new Date(n)),e.data("livestampdata",m).empty(),i.push(e[0])}},m=function(){n||(r.update(),setTimeout(m,e))},r={update:function(){t("[data-livestamp]").each((function(){var a=t(this);o(a,a.data("livestamp"))}));var e=[];i.each((function(){var n=t(this),i=n.data("livestampdata");if(void 0===i)e.push(this);else if(a.isMoment(i.moment)){var o=n.html(),m=i.moment.fromNow();if(o!=m){var r=t.Event("change.livestamp");n.removeClass("stamp-loading"),n.trigger(r,[o,m]),r.isDefaultPrevented()||n.html(m)}}})),i=i.not(e)},pause:function(){n=!0},resume:function(){n=!1,m()},interval:function(t){if(void 0===t)return e;e=t}},s={add:function(e,n){return"number"==typeof n&&(n*=1e3),n=a(new Date(n)),a.isMoment(n)&&!isNaN(+n)&&(e.each((function(){o(t(this),n)})),r.update()),e},destroy:function(a){return i=i.not(a),a.each((function(){var e=t(this),n=e.data("livestampdata");if(void 0===n)return a;e.html(n.original?n.original:"").removeData("livestampdata")})),a},isLivestamp:function(t){return void 0!==t.data("livestampdata")}};t.livestamp=r,t((function(){r.resume()})),t.fn.livestamp=function(t,a){return s[t]||(a=t,t="add"),s[t](this,a)}}(jQuery,moment);