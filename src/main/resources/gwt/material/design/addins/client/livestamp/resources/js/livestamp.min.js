!function(t,a){var e=1e3,n=!1,i=t([]),o=function(e,n){var o=e.data("livestampdata");if("number"==typeof n&&(n*=1e3),e.removeAttr("data-livestamp").removeData("livestamp"),n=a(new Date(n)),a.isMoment(n)&&!isNaN(+n)){var r=t.extend({},{original:e.contents()},o);r.moment=a(new Date(n)),e.data("livestampdata",r).empty(),i.push(e[0])}},r=function(){n||(m.update(),setTimeout(r,e))},m={update:function(){t("[data-livestamp]").each(function(){var a=t(this);o(a,a.data("livestamp"))});var e=[];i.each(function(){var n=t(this),i=n.data("livestampdata");if(void 0===i)e.push(this);else if(a.isMoment(i.moment)){var o=n.html(),r=i.moment.fromNow();if(o!=r){var m=t.Event("change.livestamp");n.trigger(m,[o,r]),m.isDefaultPrevented()||n.html(r)}}}),i=i.not(e)},pause:function(){n=!0},resume:function(){n=!1,r()},interval:function(t){if(void 0===t)return e;e=t}},s={add:function(e,n){return"number"==typeof n&&(n*=1e3),n=a(new Date(n)),a.isMoment(n)&&!isNaN(+n)&&(e.each(function(){o(t(this),n)}),m.update()),e},destroy:function(a){return i=i.not(a),a.each(function(){var e=t(this),n=e.data("livestampdata");if(void 0===n)return a;e.html(n.original?n.original:"").removeData("livestampdata")}),a},isLivestamp:function(t){return void 0!==t.data("livestampdata")}};t.livestamp=m,t(function(){m.resume()}),t.fn.livestamp=function(t,a){return s[t]||(a=t,t="add"),s[t](this,a)}}(jQuery,moment);